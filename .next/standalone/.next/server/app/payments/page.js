(()=>{var e={};e.id=3074,e.ids=[3074],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>x,tree:()=>d}),a(18102),a(79286),a(7629),a(12523);var s=a(23191),r=a(88716),l=a(37922),i=a.n(l),c=a(95231),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);a.d(t,n);let d=["",{children:["payments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,18102)),"/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,79286)),"/Users/davicho/MASTER proyectos/FacePay/src/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,7629)),"/Users/davicho/MASTER proyectos/FacePay/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,12523)),"/Users/davicho/MASTER proyectos/FacePay/src/app/not-found.tsx"]}],o=["/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx"],p="/payments/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/payments/page",pathname:"/payments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},45705:(e,t,a)=>{Promise.resolve().then(a.bind(a,50828))},83855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},33734:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},98091:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},50828:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(10326),r=a(17577),l=a(30058),i=a(62881);let c=(0,i.Z)("bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]),n=(0,i.Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var d=a(28916),o=a(83855),p=a(33734),m=a(98091),x=a(94019),h=a(60763),u=a(88648),y=a(91664);function v(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[v,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[f,N]=(0,r.useState)({type:"card",provider:"stripe",isDefault:!1}),[w,k]=(0,r.useState)({}),M=async()=>{try{let e=await fetch("/api/payments/methods");if(e.ok){let a=await e.json();t(a.data)}}catch(e){console.error("Failed to fetch payment methods:",e)}finally{i(!1)}},P=()=>{let e={};return"card"===f.type?(f.cardNumber?.replace(/\s/g,"")?/^\d{13,19}$/.test(f.cardNumber.replace(/\s/g,""))||(e.cardNumber="Please enter a valid card number"):e.cardNumber="Card number is required",f.expiryMonth||(e.expiryMonth="Expiry month is required"),f.expiryYear||(e.expiryYear="Expiry year is required"),f.cvc?/^\d{3,4}$/.test(f.cvc)||(e.cvc="Please enter a valid CVC"):e.cvc="CVC is required"):"crypto"!==f.type||f.walletAddress||(e.walletAddress="Wallet address is required"),k(e),0===Object.keys(e).length},A=async()=>{if(P()){j(!0);try{Date.now().toString(),f.type,f.provider,"card"===f.type?(f.cardNumber?.slice(-4),parseInt(f.expiryMonth||"0"),parseInt(f.expiryYear||"0")):(f.walletAddress,f.network),f.isDefault,(await fetch("/api/payments/methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:f.type,provider:f.provider,..."crypto"===f.type&&{walletAddress:f.walletAddress,network:f.network},isDefault:f.isDefault})})).ok&&(await M(),b(!1),N({type:"card",provider:"stripe",isDefault:!1}),k({}))}catch(e){console.error("Failed to add payment method:",e)}finally{j(!1)}}},C=async e=>{try{(await fetch(`/api/payments/methods/${e}`,{method:"DELETE"})).ok&&t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to remove payment method:",e)}},E=async e=>{try{(await fetch(`/api/payments/methods/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDefault:!0})})).ok&&await M()}catch(e){console.error("Failed to set default payment method:",e)}},S=e=>{let t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,""),a=t.match(/\d{4,16}/g),s=a&&a[0]||"",r=[];for(let e=0,t=s.length;e<t;e+=4)r.push(s.substring(e,e+4));return r.length?r.join(" "):t},T=e=>"crypto"===e.type?"bitcoin"===e.provider?c:n:d.Z,$=e=>{if("crypto"===e.type){let t=e.details;return`${e.provider.charAt(0).toUpperCase()+e.provider.slice(1)} Wallet (${t.walletAddress?.slice(0,6)}...${t.walletAddress?.slice(-4)})`}{let t=e.details;return`${t.brand?.toUpperCase()} •••• ${t.last4}`}};return a?s.jsx(u.Z,{activeTab:"payments",children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):s.jsx(u.Z,{activeTab:"payments",children:(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)(l.E.div,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"Payment Methods"}),s.jsx("p",{className:"text-gray-600 mt-2 text-base sm:text-lg",children:"Manage your cards, wallets, and crypto accounts"})]}),s.jsx(l.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,s.jsxs)(y.z,{onClick:()=>b(!0),className:"btn-primary px-6 py-3 shadow-xl w-full sm:w-auto",children:[s.jsx(o.Z,{className:"w-5 h-5 mr-3"}),s.jsx("span",{children:"Add Payment Method"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[e.map((e,t)=>{let a=T(e);return(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"card-premium p-6 hover-lift group relative overflow-hidden",children:[e.isDefault&&s.jsx("div",{className:"absolute top-4 right-4",children:(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(p.Z,{className:"w-3 h-3 mr-1"}),"Default"]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:`p-3 rounded-full ${"crypto"===e.type?"bg-orange-100":"bg-blue-100"}`,children:s.jsx(a,{className:`w-6 h-6 ${"crypto"===e.type?"text-orange-600":"text-blue-600"}`})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:$(e)}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 capitalize",children:[e.type," • ",e.provider]})]})]}),"card"===e.type&&s.jsx("div",{className:"mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Expires ",e.details.expMonth?.toString().padStart(2,"0"),"/",e.details.expYear]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex space-x-2",children:!e.isDefault&&s.jsx(y.z,{size:"sm",variant:"outline",onClick:()=>E(e.id),className:"text-xs",children:"Set Default"})}),s.jsx("button",{onClick:()=>C(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(m.Z,{className:"w-4 h-4"})})]})]},e.id)}),0===e.length&&s.jsx(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},className:"col-span-full text-center py-16",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx(d.Z,{className:"w-12 h-12 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Payment Methods"}),s.jsx("p",{className:"text-gray-500 mb-6 text-base leading-relaxed",children:"Add your first payment method to start making secure transactions with FacePay"}),s.jsx(l.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,s.jsxs)(y.z,{onClick:()=>b(!0),className:"btn-primary px-8 py-3 shadow-lg",children:[s.jsx(o.Z,{className:"w-5 h-5 mr-3"}),"Add Your First Method"]})})]})})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx(l.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"card-premium max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:(0,s.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Payment Method"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Securely connect your preferred payment option"})]}),s.jsx(l.E.button,{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(x.Z,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Type"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>N(e=>({...e,type:"card",provider:"stripe"})),className:`p-4 border rounded-lg flex items-center space-x-3 ${"card"===f.type?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(d.Z,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Card"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>N(e=>({...e,type:"crypto",provider:"ethereum"})),className:`p-4 border rounded-lg flex items-center space-x-3 ${"crypto"===f.type?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(n,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Crypto"})]})]})]}),"card"===f.type&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),s.jsx("input",{type:"text",value:f.cardNumber||"",onChange:e=>{let t=S(e.target.value);N(e=>({...e,cardNumber:t}))},placeholder:"1234 5678 9012 3456",className:`form-input ${w.cardNumber?"form-input-error":""}`,maxLength:19}),w.cardNumber&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.cardNumber})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Month"}),(0,s.jsxs)("select",{value:f.expiryMonth||"",onChange:e=>N(t=>({...t,expiryMonth:e.target.value})),className:`form-input ${w.expiryMonth?"form-input-error":""}`,children:[s.jsx("option",{value:"",children:"Month"}),Array.from({length:12},(e,t)=>t+1).map(e=>s.jsx("option",{value:e,children:e.toString().padStart(2,"0")},e))]}),w.expiryMonth&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.expiryMonth})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Year"}),(0,s.jsxs)("select",{value:f.expiryYear||"",onChange:e=>N(t=>({...t,expiryYear:e.target.value})),className:`form-input ${w.expiryYear?"form-input-error":""}`,children:[s.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(e,t)=>new Date().getFullYear()+t).map(e=>s.jsx("option",{value:e,children:e},e))]}),w.expiryYear&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.expiryYear})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVC"}),s.jsx("input",{type:"text",value:f.cvc||"",onChange:e=>{let t=e.target.value.replace(/\D/g,"");N(e=>({...e,cvc:t}))},placeholder:"123",className:`form-input ${w.cvc?"form-input-error":""}`,maxLength:4}),w.cvc&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.cvc})]})]}),"crypto"===f.type&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Network"}),(0,s.jsxs)("select",{value:f.provider,onChange:e=>N(t=>({...t,provider:e.target.value})),className:"form-input",children:[s.jsx("option",{value:"ethereum",children:"Ethereum"}),s.jsx("option",{value:"bitcoin",children:"Bitcoin"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),s.jsx("input",{type:"text",value:f.walletAddress||"",onChange:e=>N(t=>({...t,walletAddress:e.target.value})),placeholder:"ethereum"===f.provider?"0x...":"1...",className:`form-input ${w.walletAddress?"form-input-error":""}`}),w.walletAddress&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.walletAddress})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isDefault",checked:f.isDefault,onChange:e=>N(t=>({...t,isDefault:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-900",children:"Set as default payment method"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[s.jsx(l.E.div,{className:"flex-1",whileHover:{scale:1.02},whileTap:{scale:.98},children:s.jsx(y.z,{onClick:A,disabled:g,className:"btn-primary w-full py-4 text-lg shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:g?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"Adding..."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.Z,{className:"w-5 h-5 mr-3"}),"Add Payment Method"]})})}),s.jsx(l.E.div,{className:"flex-1",whileHover:{scale:1.02},whileTap:{scale:.98},children:s.jsx(y.z,{variant:"outline",onClick:()=>b(!1),className:"w-full py-4 text-lg border-2 border-gray-300 hover:border-blue-500 hover:bg-blue-50",children:"Cancel"})})]})]})]})})})]})})}},18102:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>c});var s=a(68570);let r=(0,s.createProxy)(String.raw`/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let c=(0,s.createProxy)(String.raw`/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,4185,7068,5832,6402,8648],()=>a(18029));module.exports=s})();
(()=>{var e={};e.id=3708,e.ids=[3708],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18873:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>n}),s(12108),s(79286),s(35866);var t=s(23191),r=s(88716),i=s(37922),d=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(a,o);let n=["",{children:["admin",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,12108)),"/Users/davicho/MASTER proyectos/FacePay/src/app/admin/audit/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,79286)),"/Users/davicho/MASTER proyectos/FacePay/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/davicho/MASTER proyectos/FacePay/src/app/admin/audit/page.tsx"],u="/admin/audit/page",x={require:s,loadChunk:()=>Promise.resolve()},g=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/audit/page",pathname:"/admin/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},58782:(e,a,s)=>{Promise.resolve().then(s.bind(s,7865))},48998:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},88319:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},79635:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7865:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>N});var t=s(10326),r=s(17577),i=s(81013),d=s(58508),l=s(6174),o=s(8672),n=s(30361),c=s(50949),u=s(48998),x=s(58038),g=s(79635),m=s(88319),h=s(88378),p=s(12714),y=s(48238),b=s(69561);let v=[{id:"audit_001",timestamp:"2024-01-20T14:30:00Z",userId:"admin_001",userName:"Admin Usuario",action:"UPDATE_USER",resource:"user",resourceId:"user_123",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 Chrome/120.0.0.0",status:"success",details:"Usuario bloqueado por actividad sospechosa",changes:[{field:"status",oldValue:"active",newValue:"blocked"},{field:"blocked_reason",oldValue:"",newValue:"suspicious_activity"}],sessionId:"sess_abc123",location:"Madrid, ES"},{id:"audit_002",timestamp:"2024-01-20T13:15:00Z",userId:"admin_002",userName:"Maria Garc\xeda",action:"DELETE_TRANSACTION",resource:"transaction",resourceId:"tx_456",ipAddress:"203.0.113.45",userAgent:"Mozilla/5.0 Safari/17.0",status:"success",details:"Transacci\xf3n eliminada por solicitud de reembolso",changes:[{field:"status",oldValue:"completed",newValue:"deleted"},{field:"reason",oldValue:"",newValue:"refund_request"}],sessionId:"sess_def456",location:"Barcelona, ES"},{id:"audit_003",timestamp:"2024-01-20T12:45:00Z",userId:"admin_001",userName:"Admin Usuario",action:"LOGIN_ATTEMPT",resource:"auth",ipAddress:"198.51.100.23",userAgent:"Mozilla/5.0 Firefox/121.0",status:"failure",details:"Intento de login fallido - contrase\xf1a incorrecta",sessionId:"sess_ghi789",location:"Valencia, ES"},{id:"audit_004",timestamp:"2024-01-20T11:20:00Z",userId:"admin_003",userName:"Carlos L\xf3pez",action:"UPDATE_SETTINGS",resource:"system_settings",resourceId:"security_config",ipAddress:"203.0.113.66",userAgent:"Mozilla/5.0 Chrome/120.0.0.0",status:"warning",details:"Configuraci\xf3n de seguridad modificada",changes:[{field:"max_login_attempts",oldValue:"5",newValue:"3"},{field:"session_timeout",oldValue:"30",newValue:"15"}],sessionId:"sess_jkl012",location:"Sevilla, ES"},{id:"audit_005",timestamp:"2024-01-20T10:05:00Z",userId:"admin_002",userName:"Maria Garc\xeda",action:"VIEW_USER_DATA",resource:"user",resourceId:"user_789",ipAddress:"192.0.2.150",userAgent:"Mozilla/5.0 Chrome/120.0.0.0",status:"success",details:"Consulta de datos de usuario para investigaci\xf3n de seguridad",sessionId:"sess_mno345",location:"Madrid, ES"}],j=[{name:"00:00",value:5},{name:"04:00",value:2},{name:"08:00",value:15},{name:"12:00",value:28},{name:"16:00",value:34},{name:"20:00",value:19}],k=({status:e})=>{let{color:a,icon:s}=(()=>{switch(e){case"success":return{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:n.Z};case"failure":return{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:c.Z};case"warning":return{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",icon:c.Z};default:return{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:u.Z}}})();return(0,t.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a}`,children:[t.jsx(s,{className:"w-3 h-3 mr-1"}),{success:"\xc9xito",failure:"Fallo",warning:"Advertencia"}[e]||"Desconocido"]})},f=({action:e})=>{let{color:a,icon:s}={LOGIN_ATTEMPT:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:x.Z},UPDATE_USER:{color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",icon:g.Z},DELETE_TRANSACTION:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:m.Z},UPDATE_SETTINGS:{color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",icon:h.Z},VIEW_USER_DATA:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:p.Z}}[e]||{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:y.Z};return(0,t.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a}`,children:[t.jsx(s,{className:"w-3 h-3 mr-1"}),e.replace(/_/g," ").toLowerCase()]})};function N(){let[e]=(0,r.useState)(v),[a,s]=(0,r.useState)("24h"),u=[{accessorKey:"timestamp",header:"Fecha y Hora",cell:({row:e})=>{let a=new Date(e.original.timestamp);return(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:a.toLocaleDateString("es-ES")}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.toLocaleTimeString("es-ES")})]})}},{accessorKey:"userName",header:"Usuario",cell:({row:e})=>(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.original.userName}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.original.userId})]})},{accessorKey:"action",header:"Acci\xf3n",cell:({row:e})=>t.jsx(f,{action:e.original.action})},{accessorKey:"resource",header:"Recurso",cell:({row:e})=>(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.original.resource}),e.original.resourceId&&t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:e.original.resourceId})]})},{accessorKey:"status",header:"Estado",cell:({row:e})=>t.jsx(k,{status:e.original.status})},{accessorKey:"details",header:"Detalles",cell:({row:e})=>t.jsx("div",{className:"max-w-xs truncate",title:e.original.details,children:e.original.details})},{accessorKey:"ipAddress",header:"IP / Ubicaci\xf3n",cell:({row:e})=>(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-mono text-sm text-gray-900 dark:text-white",children:e.original.ipAddress}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.original.location})]})}],x=e.length,g=e.filter(e=>"success"===e.status).length,m=e.filter(e=>"failure"===e.status).length,h=e.filter(e=>"warning"===e.status).length;return t.jsx(i.Z,{title:"Logs de Auditor\xeda",description:"Registro completo de todas las acciones administrativas",children:(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx(b.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rango de tiempo:"}),(0,t.jsxs)("select",{value:a,onChange:e=>s(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"1h",children:"\xdaltima hora"}),t.jsx("option",{value:"24h",children:"\xdaltimas 24 horas"}),t.jsx("option",{value:"7d",children:"\xdaltimos 7 d\xedas"}),t.jsx("option",{value:"30d",children:"\xdaltimos 30 d\xedas"}),t.jsx("option",{value:"90d",children:"\xdaltimos 90 d\xedas"})]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(l.Z,{title:"Total de Acciones",value:x.toString(),change:"\xdaltimas 24h",changeType:"neutral",icon:y.Z,iconColor:"text-blue-600"}),t.jsx(l.Z,{title:"Exitosas",value:g.toString(),change:`${(g/x*100).toFixed(1)}% del total`,changeType:"positive",icon:n.Z,iconColor:"text-green-600"}),t.jsx(l.Z,{title:"Fallidas",value:m.toString(),change:m>0?"Revisar causas":"Todo OK",changeType:m>0?"negative":"positive",icon:c.Z,iconColor:"text-red-600"}),t.jsx(l.Z,{title:"Advertencias",value:h.toString(),change:"Acciones sensibles",changeType:"neutral",icon:c.Z,iconColor:"text-yellow-600"})]}),t.jsx(o.Z,{data:j,title:"Actividad de Auditor\xeda por Hora",color:"#8B5CF6",height:300}),h>0&&t.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx(c.Z,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3"}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Acciones Cr\xedticas Detectadas"}),(0,t.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:["Se han detectado ",h," acciones que requieren revisi\xf3n. Estas incluyen cambios en configuraciones cr\xedticas de seguridad."]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Acciones M\xe1s Frecuentes"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-4",children:["UPDATE_USER","VIEW_USER_DATA","LOGIN_ATTEMPT","UPDATE_SETTINGS"].map((a,s)=>{let r=e.filter(e=>e.action===a).length;return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.replace(/_/g," ")})}),t.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:r})]},a)})})})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Usuarios M\xe1s Activos"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-4",children:["Admin Usuario","Maria Garc\xeda","Carlos L\xf3pez"].map((a,s)=>{let r=e.filter(e=>e.userName===a).length;return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:a.split(" ").map(e=>e[0]).join("")})}),t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a})]}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:[r," acciones"]})]},a)})})})]})]}),t.jsx(d.Z,{data:e,columns:u,title:"Registro de Auditor\xeda",onExport:()=>{console.log("Exporting audit logs...")}})]})})}},8672:(e,a,s)=>{"use strict";s.d(a,{Z:()=>u});var t=s(10326);s(17577);var r=s(30660),i=s(14958),d=s(18423),l=s(62637),o=s(9997),n=s(44675),c=s(74390);function u({data:e,dataKey:a="value",xAxisKey:s="name",title:u,color:x="#3B82F6",height:g=300,showGrid:m=!0,showTooltip:h=!0}){return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[u&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:u}),t.jsx(r.h,{width:"100%",height:g,children:(0,t.jsxs)(i.w,{data:e,children:[m&&t.jsx(d.q,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),t.jsx(l.K,{dataKey:s,className:"text-gray-600 dark:text-gray-400"}),t.jsx(o.B,{className:"text-gray-600 dark:text-gray-400"}),h&&t.jsx(n.u,{contentStyle:{backgroundColor:"var(--tooltip-bg)",border:"1px solid var(--tooltip-border)",borderRadius:"6px",color:"var(--tooltip-color)"}}),t.jsx(c.x,{type:"monotone",dataKey:a,stroke:x,strokeWidth:2,dot:{fill:x,strokeWidth:2,r:4},activeDot:{r:6}})]})})]})}},12108:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>d,__esModule:()=>i,default:()=>l});var t=s(68570);let r=(0,t.createProxy)(String.raw`/Users/davicho/MASTER proyectos/FacePay/src/app/admin/audit/page.tsx`),{__esModule:i,$$typeof:d}=r;r.default;let l=(0,t.createProxy)(String.raw`/Users/davicho/MASTER proyectos/FacePay/src/app/admin/audit/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[8948,1662,4536,2510,2592,698,7364],()=>s(18873));module.exports=t})();
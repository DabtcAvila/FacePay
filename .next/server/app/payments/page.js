(()=>{var e={};e.id=3074,e.ids=[3074],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},87706:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>x,tree:()=>n}),r(18102),r(79286),r(35866);var a=r(23191),s=r(88716),l=r(37922),d=r.n(l),i=r(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let n=["",{children:["payments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,18102)),"/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,79286)),"/Users/davicho/MASTER proyectos/FacePay/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx"],p="/payments/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/payments/page",pathname:"/payments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},45705:(e,t,r)=>{Promise.resolve().then(r.bind(r,50828))},83855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},33734:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},50828:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(10326),s=r(17577),l=r(30058),d=r(62881);let i=(0,d.Z)("bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]),c=(0,d.Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var n=r(28916),o=r(83855),p=r(33734),m=r(98091),x=r(94019),u=r(88648),h=r(91664);function y(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[y,b]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)({type:"card",provider:"stripe",isDefault:!1}),[N,w]=(0,s.useState)({}),k=async()=>{try{let e=await fetch("/api/payments/methods");if(e.ok){let r=await e.json();t(r.data)}}catch(e){console.error("Failed to fetch payment methods:",e)}finally{d(!1)}},M=()=>{let e={};return"card"===f.type?(f.cardNumber?.replace(/\s/g,"")?/^\d{13,19}$/.test(f.cardNumber.replace(/\s/g,""))||(e.cardNumber="Please enter a valid card number"):e.cardNumber="Card number is required",f.expiryMonth||(e.expiryMonth="Expiry month is required"),f.expiryYear||(e.expiryYear="Expiry year is required"),f.cvc?/^\d{3,4}$/.test(f.cvc)||(e.cvc="Please enter a valid CVC"):e.cvc="CVC is required"):"crypto"!==f.type||f.walletAddress||(e.walletAddress="Wallet address is required"),w(e),0===Object.keys(e).length},C=async()=>{if(M()){v(!0);try{Date.now().toString(),f.type,f.provider,"card"===f.type?(f.cardNumber?.slice(-4),parseInt(f.expiryMonth||"0"),parseInt(f.expiryYear||"0")):(f.walletAddress,f.network),f.isDefault,(await fetch("/api/payments/methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:f.type,provider:f.provider,..."crypto"===f.type&&{walletAddress:f.walletAddress,network:f.network},isDefault:f.isDefault})})).ok&&(await k(),b(!1),j({type:"card",provider:"stripe",isDefault:!1}),w({}))}catch(e){console.error("Failed to add payment method:",e)}finally{v(!1)}}},A=async e=>{try{(await fetch(`/api/payments/methods/${e}`,{method:"DELETE"})).ok&&t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to remove payment method:",e)}},P=async e=>{try{(await fetch(`/api/payments/methods/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDefault:!0})})).ok&&await k()}catch(e){console.error("Failed to set default payment method:",e)}},S=e=>{let t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,""),r=t.match(/\d{4,16}/g),a=r&&r[0]||"",s=[];for(let e=0,t=a.length;e<t;e+=4)s.push(a.substring(e,e+4));return s.length?s.join(" "):t},E=e=>"crypto"===e.type?"bitcoin"===e.provider?i:c:n.Z,$=e=>{if("crypto"===e.type){let t=e.details;return`${e.provider.charAt(0).toUpperCase()+e.provider.slice(1)} Wallet (${t.walletAddress?.slice(0,6)}...${t.walletAddress?.slice(-4)})`}{let t=e.details;return`${t.brand?.toUpperCase()} •••• ${t.last4}`}};return r?a.jsx(u.Z,{activeTab:"payments",children:a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(u.Z,{activeTab:"payments",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Methods"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your cards and crypto wallets"})]}),(0,a.jsxs)(h.z,{onClick:()=>b(!0),className:"flex items-center space-x-2",children:[a.jsx(o.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Payment Method"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.map((e,t)=>{let r=E(e);return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative",children:[e.isDefault&&a.jsx("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(p.Z,{className:"w-3 h-3 mr-1"}),"Default"]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:`p-3 rounded-full ${"crypto"===e.type?"bg-orange-100":"bg-blue-100"}`,children:a.jsx(r,{className:`w-6 h-6 ${"crypto"===e.type?"text-orange-600":"text-blue-600"}`})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:$(e)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 capitalize",children:[e.type," • ",e.provider]})]})]}),"card"===e.type&&a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Expires ",e.details.expMonth?.toString().padStart(2,"0"),"/",e.details.expYear]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-2",children:!e.isDefault&&a.jsx(h.z,{size:"sm",variant:"outline",onClick:()=>P(e.id),className:"text-xs",children:"Set Default"})}),a.jsx("button",{onClick:()=>A(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(m.Z,{className:"w-4 h-4"})})]})]},e.id)}),0===e.length&&(0,a.jsxs)("div",{className:"col-span-full text-center py-12",children:[a.jsx(n.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No payment methods added"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add a card or crypto wallet to get started"})]})]}),y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Payment Method"}),a.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(x.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Type"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>j(e=>({...e,type:"card",provider:"stripe"})),className:`p-4 border rounded-lg flex items-center space-x-3 ${"card"===f.type?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(n.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Card"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>j(e=>({...e,type:"crypto",provider:"ethereum"})),className:`p-4 border rounded-lg flex items-center space-x-3 ${"crypto"===f.type?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(c,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Crypto"})]})]})]}),"card"===f.type&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),a.jsx("input",{type:"text",value:f.cardNumber||"",onChange:e=>{let t=S(e.target.value);j(e=>({...e,cardNumber:t}))},placeholder:"1234 5678 9012 3456",className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${N.cardNumber?"border-red-300":"border-gray-300"}`,maxLength:19}),N.cardNumber&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.cardNumber})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Month"}),(0,a.jsxs)("select",{value:f.expiryMonth||"",onChange:e=>j(t=>({...t,expiryMonth:e.target.value})),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${N.expiryMonth?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Month"}),Array.from({length:12},(e,t)=>t+1).map(e=>a.jsx("option",{value:e,children:e.toString().padStart(2,"0")},e))]}),N.expiryMonth&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.expiryMonth})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Year"}),(0,a.jsxs)("select",{value:f.expiryYear||"",onChange:e=>j(t=>({...t,expiryYear:e.target.value})),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${N.expiryYear?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(e,t)=>new Date().getFullYear()+t).map(e=>a.jsx("option",{value:e,children:e},e))]}),N.expiryYear&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.expiryYear})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVC"}),a.jsx("input",{type:"text",value:f.cvc||"",onChange:e=>{let t=e.target.value.replace(/\D/g,"");j(e=>({...e,cvc:t}))},placeholder:"123",className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${N.cvc?"border-red-300":"border-gray-300"}`,maxLength:4}),N.cvc&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.cvc})]})]}),"crypto"===f.type&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Network"}),(0,a.jsxs)("select",{value:f.provider,onChange:e=>j(t=>({...t,provider:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"ethereum",children:"Ethereum"}),a.jsx("option",{value:"bitcoin",children:"Bitcoin"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),a.jsx("input",{type:"text",value:f.walletAddress||"",onChange:e=>j(t=>({...t,walletAddress:e.target.value})),placeholder:"ethereum"===f.provider?"0x...":"1...",className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${N.walletAddress?"border-red-300":"border-gray-300"}`}),N.walletAddress&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.walletAddress})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"isDefault",checked:f.isDefault,onChange:e=>j(t=>({...t,isDefault:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"isDefault",className:"ml-2 text-sm text-gray-900",children:"Set as default payment method"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[a.jsx(h.z,{onClick:C,disabled:g,className:"flex-1",children:g?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Add Payment Method"}),a.jsx(h.z,{variant:"outline",onClick:()=>b(!1),className:"flex-1",children:"Cancel"})]})]})]})})})]})})}},18102:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>d,__esModule:()=>l,default:()=>i});var a=r(68570);let s=(0,a.createProxy)(String.raw`/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx`),{__esModule:l,$$typeof:d}=s;s.default;let i=(0,a.createProxy)(String.raw`/Users/davicho/MASTER proyectos/FacePay/src/app/payments/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,1662,4867,698,6402,8648],()=>r(87706));module.exports=a})();
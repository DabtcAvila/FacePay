"use strict";exports.id=3771,exports.ids=[3771],exports.modules={71821:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},27808:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(10326),i=s(17577),l=s(30058),r=s(88129);function n({isScanning:e=!1,onScanComplete:t,size:s="md",className:n=""}){let[c,o]=(0,i.useState)(0),[d,m]=(0,i.useState)("idle");return(0,a.jsxs)("div",{className:`relative flex items-center justify-center ${{sm:"w-24 h-24",md:"w-32 h-32",lg:"w-48 h-48"}[s]} ${n}`,children:[a.jsx("div",{className:"relative",children:(0,a.jsxs)(l.E.div,{className:"border-2 border-blue-500 rounded-full aspect-square",style:{width:"100%",height:"100%"},animate:{borderColor:"complete"===d?"#10B981":"scanning"===d?"#3B82F6":"detecting"===d?"#F59E0B":"#6B7280"},transition:{duration:.3},children:[a.jsx(r.M,{children:"detecting"===d&&a.jsx(a.Fragment,{children:[0,1,2].map(e=>a.jsx(l.E.div,{className:"absolute inset-0 border-2 border-yellow-400 rounded-full face-detection-ring",initial:{scale:.8,opacity:1},animate:{scale:1.4,opacity:0},exit:{scale:1.4,opacity:0},transition:{duration:1.5,delay:.5*e,repeat:"detecting"===d?1/0:0}},e))})}),"scanning"===d&&a.jsx("div",{className:"absolute inset-2 flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[a.jsx("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"rgba(59, 130, 246, 0.2)",strokeWidth:"2"}),a.jsx(l.E.circle,{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"#3B82F6",strokeWidth:"2",strokeDasharray:"283",initial:{strokeDashoffset:283},animate:{strokeDashoffset:283-283*c/100},transition:{duration:.1}})]})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative w-3/5 h-3/5",children:[a.jsx(l.E.div,{className:"absolute top-1/3 left-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===d?"#10B981":"#3B82F6",scale:"scanning"===d?[1,1.2,1]:1},transition:{duration:.5,repeat:"scanning"===d?1/0:0}}),a.jsx(l.E.div,{className:"absolute top-1/3 right-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===d?"#10B981":"#3B82F6",scale:"scanning"===d?[1,1.2,1]:1},transition:{duration:.5,delay:.1,repeat:"scanning"===d?1/0:0}}),a.jsx(l.E.div,{className:"absolute bottom-1/3 left-1/2 transform -translate-x-1/2 w-4 h-2 border-b-2 border-blue-500 rounded-b-full",animate:{borderColor:"complete"===d?"#10B981":"#3B82F6"}})]})}),a.jsx(r.M,{children:"complete"===d&&a.jsx(l.E.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:a.jsx(l.E.svg,{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5},children:a.jsx(l.E.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]})}),a.jsx("div",{className:"absolute -bottom-8 text-center",children:(0,a.jsxs)(l.E.p,{className:"text-sm font-medium",animate:{color:"complete"===d?"#10B981":"scanning"===d?"#3B82F6":"detecting"===d?"#F59E0B":"#6B7280"},children:["idle"===d&&"Ready to scan","detecting"===d&&"Detecting face...","scanning"===d&&`Scanning... ${c}%`,"complete"===d&&"Complete!"]})})]})}},43771:(e,t,s)=>{s.d(t,{Z:()=>u});var a=s(10326),i=s(17577),l=s(30058),r=s(88129),n=s(71821),c=s(58038),o=s(28916),d=s(9015),m=s(91664),x=s(27808);function u({amount:e,recipient:t,description:s,onSuccess:u,onCancel:h,onPaymentComplete:p}){let[b,j]=(0,i.useState)("details"),[f,g]=(0,i.useState)(!1),[y,N]=(0,i.useState)("face"),[v,w]=(0,i.useState)({amount:e,description:s||"",paymentMethod:"face"}),k=async e=>{e.preventDefault(),"face"===y?(j("verification"),g(!0)):"card"===y&&await E()},E=async()=>{try{j("processing");let e=await fetch("/api/payments/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({amount:v.amount,description:v.description||"FacePay Payment",metadata:{recipient:t||"N/A",paymentMethod:"stripe_checkout"}})});if(!e.ok)throw Error("Failed to create checkout session");let{data:s}=await e.json();s.sessionUrl&&(window.location.href=s.sessionUrl)}catch(e){console.error("Stripe checkout error:",e),j("details")}};return(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Secure Payment"}),a.jsx("p",{className:"text-gray-600",children:"Complete your transaction with biometric verification"})]}),a.jsx("div",{className:"flex justify-between items-center",children:["Details","Verify","Process","Complete"].map((e,t)=>{let s=["details","verification","processing","complete"].indexOf(b),i=t<=s;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx(l.E.div,{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${i?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,animate:{scale:t===s?1.1:1,backgroundColor:i?"#3B82F6":"#E5E7EB"},transition:{duration:.3},children:t+1}),a.jsx("span",{className:`text-xs mt-1 ${i?"text-blue-600":"text-gray-400"}`,children:e})]},e)})}),(0,a.jsxs)(r.M,{mode:"wait",children:["details"===b&&(0,a.jsxs)(l.E.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[a.jsx(n.Z,{className:"w-6 h-6 text-blue-600 mr-1"}),a.jsx("span",{className:"text-3xl font-bold text-blue-900",children:v.amount.toFixed(2)})]}),t&&(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["To: ",t]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What's this payment for?",value:v.description,onChange:e=>w(t=>({...t,description:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l.E.div,{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${"face"===y?"border-blue-500 bg-blue-50":"border-gray-200"}`,onClick:()=>N("face"),whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(c.Z,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Biometric Verification"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Secure face recognition"})]}),a.jsx("div",{className:"ml-auto",children:a.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${"face"===y?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:"face"===y&&a.jsx("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})})})]})}),a.jsx(l.E.div,{className:`border-2 rounded-lg p-3 cursor-pointer transition-colors ${"card"===y?"border-blue-500 bg-blue-50":"border-gray-200"}`,onClick:()=>N("card"),whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(o.Z,{className:"w-5 h-5 text-gray-600 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Credit Card"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Traditional payment"})]}),a.jsx("div",{className:"ml-auto",children:a.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${"card"===y?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:"card"===y&&a.jsx("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})})})]})})]})]}),(0,a.jsxs)(m.z,{type:"submit",className:"w-full payment-flow-glow bg-blue-600 hover:bg-blue-700",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]}),h&&a.jsx(m.z,{type:"button",onClick:h,variant:"outline",className:"w-full mt-3 text-gray-600 hover:text-gray-800",children:"Cancel Payment"})]},"details"),"verification"===b&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Biometric Verification"}),a.jsx("p",{className:"text-gray-600",children:"Look at the camera and stay still"})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx(x.Z,{isScanning:f,onScanComplete:()=>{g(!1),j("processing"),setTimeout(()=>{j("complete");let e={amount:v.amount,method:"biometric",timestamp:new Date,recipient:t};p?.(e),u?.(e)},2e3)},size:"lg"})}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(c.Z,{className:"w-5 h-5 text-yellow-600 mr-2"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Your biometric data is processed securely and never stored"})]})}),h&&a.jsx(m.z,{onClick:()=>{g(!1),h()},variant:"outline",className:"w-full text-gray-600 hover:text-gray-800",children:"Cancel Verification"})]},"verification"),"processing"===b&&(0,a.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx(l.E.div,{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Processing Payment"}),a.jsx("p",{className:"text-gray-600",children:"Securing your transaction..."})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Amount:"}),(0,a.jsxs)("span",{className:"font-semibold text-blue-900",children:["$",v.amount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[a.jsx("span",{className:"text-blue-800",children:"Method:"}),a.jsx("span",{className:"font-semibold text-blue-900",children:"Biometric"})]}),t&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[a.jsx("span",{className:"text-blue-800",children:"Recipient:"}),a.jsx("span",{className:"font-semibold text-blue-900",children:t})]})]})]},"processing"),"complete"===b&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[a.jsx(l.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:a.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(l.E.svg,{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.3},children:a.jsx(l.E.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-green-700 mb-2",children:"Payment Successful!"}),a.jsx("p",{className:"text-gray-600",children:"Your transaction has been completed securely"})]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-green-800",children:"Amount Paid:"}),(0,a.jsxs)("span",{className:"font-bold text-green-900",children:["$",v.amount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-green-800",children:"Transaction ID:"}),(0,a.jsxs)("span",{className:"font-mono text-xs text-green-900",children:["TXN",Date.now()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-green-800",children:"Timestamp:"}),a.jsx("span",{className:"text-green-900",children:new Date().toLocaleTimeString()})]})]}),a.jsx(m.z,{onClick:()=>j("details"),variant:"outline",className:"w-full",children:"New Payment"})]},"complete")]})]})}}};
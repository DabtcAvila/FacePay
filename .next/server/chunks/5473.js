"use strict";exports.id=5473,exports.ids=[5473],exports.modules={28916:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},71821:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9015:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},79635:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},27808:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(10326),r=a(17577),i=a(30058),l=a(88129);function n({isScanning:e=!1,onScanComplete:t,size:a="md",className:n=""}){let[c,o]=(0,r.useState)(0),[d,m]=(0,r.useState)("idle");return(0,s.jsxs)("div",{className:`relative flex items-center justify-center ${{sm:"w-24 h-24",md:"w-32 h-32",lg:"w-48 h-48"}[a]} ${n}`,children:[s.jsx("div",{className:"relative",children:(0,s.jsxs)(i.E.div,{className:"border-2 border-blue-500 rounded-full aspect-square",style:{width:"100%",height:"100%"},animate:{borderColor:"complete"===d?"#10B981":"scanning"===d?"#3B82F6":"detecting"===d?"#F59E0B":"#6B7280"},transition:{duration:.3},children:[s.jsx(l.M,{children:"detecting"===d&&s.jsx(s.Fragment,{children:[0,1,2].map(e=>s.jsx(i.E.div,{className:"absolute inset-0 border-2 border-yellow-400 rounded-full face-detection-ring",initial:{scale:.8,opacity:1},animate:{scale:1.4,opacity:0},exit:{scale:1.4,opacity:0},transition:{duration:1.5,delay:.5*e,repeat:"detecting"===d?1/0:0}},e))})}),"scanning"===d&&s.jsx("div",{className:"absolute inset-2 flex items-center justify-center",children:(0,s.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[s.jsx("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"rgba(59, 130, 246, 0.2)",strokeWidth:"2"}),s.jsx(i.E.circle,{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"#3B82F6",strokeWidth:"2",strokeDasharray:"283",initial:{strokeDashoffset:283},animate:{strokeDashoffset:283-283*c/100},transition:{duration:.1}})]})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"relative w-3/5 h-3/5",children:[s.jsx(i.E.div,{className:"absolute top-1/3 left-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===d?"#10B981":"#3B82F6",scale:"scanning"===d?[1,1.2,1]:1},transition:{duration:.5,repeat:"scanning"===d?1/0:0}}),s.jsx(i.E.div,{className:"absolute top-1/3 right-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===d?"#10B981":"#3B82F6",scale:"scanning"===d?[1,1.2,1]:1},transition:{duration:.5,delay:.1,repeat:"scanning"===d?1/0:0}}),s.jsx(i.E.div,{className:"absolute bottom-1/3 left-1/2 transform -translate-x-1/2 w-4 h-2 border-b-2 border-blue-500 rounded-b-full",animate:{borderColor:"complete"===d?"#10B981":"#3B82F6"}})]})}),s.jsx(l.M,{children:"complete"===d&&s.jsx(i.E.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:s.jsx(i.E.svg,{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5},children:s.jsx(i.E.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]})}),s.jsx("div",{className:"absolute -bottom-8 text-center",children:(0,s.jsxs)(i.E.p,{className:"text-sm font-medium",animate:{color:"complete"===d?"#10B981":"scanning"===d?"#3B82F6":"detecting"===d?"#F59E0B":"#6B7280"},children:["idle"===d&&"Ready to scan","detecting"===d&&"Detecting face...","scanning"===d&&`Scanning... ${c}%`,"complete"===d&&"Complete!"]})})]})}},43771:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(10326),r=a(17577),i=a(30058),l=a(88129),n=a(60763),c=a(71821),o=a(28916),d=a(9015),m=a(91664),x=a(27808);function h({amount:e,recipient:t,description:a,onSuccess:h,onCancel:u,onPaymentComplete:b}){let[g,p]=(0,r.useState)("details"),[y,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)("face"),[v,w]=(0,r.useState)({amount:e,description:a||"",paymentMethod:"face"}),k=async e=>{e.preventDefault(),"face"===j?(p("verification"),f(!0)):"card"===j&&await E()},E=async()=>{try{p("processing");let e=await fetch("/api/payments/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({amount:v.amount,description:v.description||"FacePay Payment",metadata:{recipient:t||"N/A",paymentMethod:"stripe_checkout"}})});if(!e.ok)throw Error("Failed to create checkout session");let{data:a}=await e.json();a.sessionUrl&&(window.location.href=a.sessionUrl)}catch(e){console.error("Stripe checkout error:",e),p("details")}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto card-premium p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(n.Z,{className:"w-8 h-8 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2 tracking-tight",children:"Secure Payment"}),s.jsx("p",{className:"text-gray-600 text-base",children:"Complete your transaction with biometric verification"})]}),s.jsx("div",{className:"flex justify-between items-center bg-gray-50/50 rounded-2xl p-4 dark:bg-gray-800/50",children:["Details","Verify","Process","Complete"].map((e,t)=>{let a=["details","verification","processing","complete"].indexOf(g),r=t<=a;return(0,s.jsxs)("div",{className:"flex flex-col items-center relative",children:[s.jsx(i.E.div,{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-semibold shadow-sm ${r?"bg-gradient-to-br from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400"}`,animate:{scale:t===a?1.1:1,boxShadow:r?"0 10px 25px -3px rgba(59, 130, 246, 0.25), 0 4px 6px -2px rgba(59, 130, 246, 0.05)":"none"},transition:{duration:.3},children:t+1}),s.jsx("span",{className:`text-xs mt-2 font-medium ${r?"text-blue-600 dark:text-blue-400":"text-gray-400"}`,children:e}),t<3&&s.jsx("div",{className:`absolute top-5 left-12 w-8 h-0.5 ${t<a?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"} transition-colors duration-300`})]},e)})}),(0,s.jsxs)(l.M,{mode:"wait",children:["details"===g&&(0,s.jsxs)(i.E.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:k,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-6 text-center border border-blue-200/50 dark:border-blue-800/50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mr-3",children:s.jsx(c.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:v.amount.toFixed(2)})]}),t&&(0,s.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:["To: ",t]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Description (Optional)"}),s.jsx("input",{type:"text",className:"form-input",placeholder:"What's this payment for?",value:v.description,onChange:e=>w(t=>({...t,description:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Payment Method"}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx(i.E.div,{className:`border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 ${"face"===j?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg shadow-blue-500/10 dark:from-blue-900/20 dark:to-indigo-900/20 dark:border-blue-400":"border-gray-200 bg-white/50 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50 dark:hover:bg-gray-700/50"}`,onClick:()=>N("face"),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mr-4 ${"face"===j?"bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg":"bg-gray-100 dark:bg-gray-700"}`,children:s.jsx(n.Z,{className:`w-6 h-6 ${"face"===j?"text-white":"text-gray-600 dark:text-gray-400"}`})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Biometric Verification"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Secure face recognition • Instant"})]}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:`w-5 h-5 rounded-full border-2 transition-all ${"face"===j?"border-blue-500 bg-blue-500 shadow-sm":"border-gray-300 dark:border-gray-600"}`,children:"face"===j&&s.jsx(i.E.div,{className:"w-2 h-2 bg-white rounded-full mx-auto mt-1",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})})})]})}),s.jsx(i.E.div,{className:`border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 ${"card"===j?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg shadow-blue-500/10 dark:from-blue-900/20 dark:to-indigo-900/20 dark:border-blue-400":"border-gray-200 bg-white/50 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50 dark:hover:bg-gray-700/50"}`,onClick:()=>N("card"),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mr-4 ${"card"===j?"bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg":"bg-gray-100 dark:bg-gray-700"}`,children:s.jsx(o.Z,{className:`w-6 h-6 ${"card"===j?"text-white":"text-gray-600 dark:text-gray-400"}`})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Credit Card"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Traditional payment • Secure"})]}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:`w-5 h-5 rounded-full border-2 transition-all ${"card"===j?"border-blue-500 bg-blue-500 shadow-sm":"border-gray-300 dark:border-gray-600"}`,children:"card"===j&&s.jsx(i.E.div,{className:"w-2 h-2 bg-white rounded-full mx-auto mt-1",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})})})]})})]})]}),(0,s.jsxs)(m.z,{type:"submit",variant:"payment",size:"lg",className:"w-full mt-6",children:[s.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]}),u&&s.jsx(m.z,{type:"button",onClick:u,variant:"outline",className:"w-full mt-3",children:"Cancel Payment"})]},"details"),"verification"===g&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Biometric Verification"}),s.jsx("p",{className:"text-gray-600",children:"Look at the camera and stay still"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(x.Z,{isScanning:y,onScanComplete:()=>{f(!1),p("processing"),setTimeout(()=>{p("complete");let e={amount:v.amount,method:"biometric",timestamp:new Date,recipient:t};b?.(e),h?.(e)},2e3)},size:"lg"})}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(n.Z,{className:"w-5 h-5 text-yellow-600 mr-2"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"Your biometric data is processed securely and never stored"})]})}),u&&s.jsx(m.z,{onClick:()=>{f(!1),u()},variant:"outline",className:"w-full text-gray-600 hover:text-gray-800",children:"Cancel Verification"})]},"verification"),"processing"===g&&(0,s.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx(i.E.div,{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Processing Payment"}),s.jsx("p",{className:"text-gray-600",children:"Securing your transaction..."})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-blue-800",children:"Amount:"}),(0,s.jsxs)("span",{className:"font-semibold text-blue-900",children:["$",v.amount.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[s.jsx("span",{className:"text-blue-800",children:"Method:"}),s.jsx("span",{className:"font-semibold text-blue-900",children:"Biometric"})]}),t&&(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[s.jsx("span",{className:"text-blue-800",children:"Recipient:"}),s.jsx("span",{className:"font-semibold text-blue-900",children:t})]})]})]},"processing"),"complete"===g&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[s.jsx(i.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(i.E.svg,{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.3},children:s.jsx(i.E.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-green-700 mb-2",children:"Payment Successful!"}),s.jsx("p",{className:"text-gray-600",children:"Your transaction has been completed securely"})]}),(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-green-800",children:"Amount Paid:"}),(0,s.jsxs)("span",{className:"font-bold text-green-900",children:["$",v.amount.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-green-800",children:"Transaction ID:"}),(0,s.jsxs)("span",{className:"font-mono text-xs text-green-900",children:["TXN",Date.now()]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-green-800",children:"Timestamp:"}),s.jsx("span",{className:"text-green-900",children:new Date().toLocaleTimeString()})]})]}),s.jsx(m.z,{onClick:()=>p("details"),variant:"outline",className:"w-full",children:"New Payment"})]},"complete")]})]})}}};
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{882:function(e,t,s){s.d(t,{Z:function(){return r}});var a=s(57437),i=s(2265),n=s(21513),l=s(34446);function r(e){let{isScanning:t=!1,onScanComplete:s,size:r="md",className:c=""}=e,[o,d]=(0,i.useState)(0),[m,x]=(0,i.useState)("idle");return(0,i.useEffect)(()=>{if(t&&"idle"===m){x("detecting"),d(0);let e=setTimeout(()=>{x("scanning");let e=setInterval(()=>{d(t=>t>=100?(clearInterval(e),x("complete"),setTimeout(()=>{null==s||s(),x("idle"),d(0)},1e3),100):t+2)},50);return()=>clearInterval(e)},1500);return()=>clearTimeout(e)}},[t,m,s]),(0,a.jsxs)("div",{className:"relative flex items-center justify-center ".concat({sm:"w-24 h-24",md:"w-32 h-32",lg:"w-48 h-48"}[r]," ").concat(c),children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(n.E.div,{className:"border-2 border-blue-500 rounded-full aspect-square",style:{width:"100%",height:"100%"},animate:{borderColor:"complete"===m?"#10B981":"scanning"===m?"#3B82F6":"detecting"===m?"#F59E0B":"#6B7280"},transition:{duration:.3},children:[(0,a.jsx)(l.M,{children:"detecting"===m&&(0,a.jsx)(a.Fragment,{children:[0,1,2].map(e=>(0,a.jsx)(n.E.div,{className:"absolute inset-0 border-2 border-yellow-400 rounded-full face-detection-ring",initial:{scale:.8,opacity:1},animate:{scale:1.4,opacity:0},exit:{scale:1.4,opacity:0},transition:{duration:1.5,delay:.5*e,repeat:"detecting"===m?1/0:0}},e))})}),"scanning"===m&&(0,a.jsx)("div",{className:"absolute inset-2 flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,a.jsx)("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"rgba(59, 130, 246, 0.2)",strokeWidth:"2"}),(0,a.jsx)(n.E.circle,{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"#3B82F6",strokeWidth:"2",strokeDasharray:"283",initial:{strokeDashoffset:283},animate:{strokeDashoffset:283-283*o/100},transition:{duration:.1}})]})}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative w-3/5 h-3/5",children:[(0,a.jsx)(n.E.div,{className:"absolute top-1/3 left-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===m?"#10B981":"#3B82F6",scale:"scanning"===m?[1,1.2,1]:1},transition:{duration:.5,repeat:"scanning"===m?1/0:0}}),(0,a.jsx)(n.E.div,{className:"absolute top-1/3 right-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===m?"#10B981":"#3B82F6",scale:"scanning"===m?[1,1.2,1]:1},transition:{duration:.5,delay:.1,repeat:"scanning"===m?1/0:0}}),(0,a.jsx)(n.E.div,{className:"absolute bottom-1/3 left-1/2 transform -translate-x-1/2 w-4 h-2 border-b-2 border-blue-500 rounded-b-full",animate:{borderColor:"complete"===m?"#10B981":"#3B82F6"}})]})}),(0,a.jsx)(l.M,{children:"complete"===m&&(0,a.jsx)(n.E.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:(0,a.jsx)(n.E.svg,{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5},children:(0,a.jsx)(n.E.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]})}),(0,a.jsx)("div",{className:"absolute -bottom-8 text-center",children:(0,a.jsxs)(n.E.p,{className:"text-sm font-medium",animate:{color:"complete"===m?"#10B981":"scanning"===m?"#3B82F6":"detecting"===m?"#F59E0B":"#6B7280"},children:["idle"===m&&"Ready to scan","detecting"===m&&"Detecting face...","scanning"===m&&"Scanning... ".concat(o,"%"),"complete"===m&&"Complete!"]})})]})}},70302:function(e,t,s){s.d(t,{Z:function(){return u}});var a=s(57437),i=s(2265),n=s(21513),l=s(34446),r=s(51077),c=s(20500),o=s(56935),d=s(74453),m=s(89733),x=s(882);function u(e){let{amount:t,recipient:s,description:u,onSuccess:h,onCancel:b,onPaymentComplete:p}=e,[f,j]=(0,i.useState)("details"),[g,y]=(0,i.useState)(!1),[N,v]=(0,i.useState)("face"),[w,k]=(0,i.useState)({amount:t,description:u||"",paymentMethod:"face"}),E=async e=>{e.preventDefault(),"face"===N?(j("verification"),y(!0)):"card"===N&&await C()},C=async()=>{try{j("processing");let e=await fetch("/api/payments/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify({amount:w.amount,description:w.description||"FacePay Payment",metadata:{recipient:s||"N/A",paymentMethod:"stripe_checkout"}})});if(!e.ok)throw Error("Failed to create checkout session");let{data:t}=await e.json();t.sessionUrl&&(window.location.href=t.sessionUrl)}catch(e){console.error("Stripe checkout error:",e),j("details")}};return(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Secure Payment"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Complete your transaction with biometric verification"})]}),(0,a.jsx)("div",{className:"flex justify-between items-center",children:["Details","Verify","Process","Complete"].map((e,t)=>{let s=["details","verification","processing","complete"].indexOf(f),i=t<=s;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(n.E.div,{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(i?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"),animate:{scale:t===s?1.1:1,backgroundColor:i?"#3B82F6":"#E5E7EB"},transition:{duration:.3},children:t+1}),(0,a.jsx)("span",{className:"text-xs mt-1 ".concat(i?"text-blue-600":"text-gray-400"),children:e})]},e)})}),(0,a.jsxs)(l.M,{mode:"wait",children:["details"===f&&(0,a.jsxs)(n.E.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(r.Z,{className:"w-6 h-6 text-blue-600 mr-1"}),(0,a.jsx)("span",{className:"text-3xl font-bold text-blue-900",children:w.amount.toFixed(2)})]}),s&&(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["To: ",s]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What's this payment for?",value:w.description,onChange:e=>k(t=>({...t,description:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.E.div,{className:"border-2 rounded-lg p-3 cursor-pointer transition-colors ".concat("face"===N?"border-blue-500 bg-blue-50":"border-gray-200"),onClick:()=>v("face"),whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Biometric Verification"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Secure face recognition"})]}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border-2 ".concat("face"===N?"border-blue-500 bg-blue-500":"border-gray-300"),children:"face"===N&&(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})})})]})}),(0,a.jsx)(n.E.div,{className:"border-2 rounded-lg p-3 cursor-pointer transition-colors ".concat("card"===N?"border-blue-500 bg-blue-50":"border-gray-200"),onClick:()=>v("card"),whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-gray-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Credit Card"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Traditional payment"})]}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border-2 ".concat("card"===N?"border-blue-500 bg-blue-500":"border-gray-300"),children:"card"===N&&(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})})})]})})]})]}),(0,a.jsxs)(m.z,{type:"submit",className:"w-full payment-flow-glow bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]}),b&&(0,a.jsx)(m.z,{type:"button",onClick:b,variant:"outline",className:"w-full mt-3 text-gray-600 hover:text-gray-800",children:"Cancel Payment"})]},"details"),"verification"===f&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Biometric Verification"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Look at the camera and stay still"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(x.Z,{isScanning:g,onScanComplete:()=>{y(!1),j("processing"),setTimeout(()=>{j("complete");let e={amount:w.amount,method:"biometric",timestamp:new Date,recipient:s};null==p||p(e),null==h||h(e)},2e3)},size:"lg"})}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-yellow-600 mr-2"}),(0,a.jsx)("p",{className:"text-sm text-yellow-800",children:"Your biometric data is processed securely and never stored"})]})}),b&&(0,a.jsx)(m.z,{onClick:()=>{y(!1),b()},variant:"outline",className:"w-full text-gray-600 hover:text-gray-800",children:"Cancel Verification"})]},"verification"),"processing"===f&&(0,a.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.E.div,{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Processing Payment"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Securing your transaction..."})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-blue-800",children:"Amount:"}),(0,a.jsxs)("span",{className:"font-semibold text-blue-900",children:["$",w.amount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[(0,a.jsx)("span",{className:"text-blue-800",children:"Method:"}),(0,a.jsx)("span",{className:"font-semibold text-blue-900",children:"Biometric"})]}),s&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[(0,a.jsx)("span",{className:"text-blue-800",children:"Recipient:"}),(0,a.jsx)("span",{className:"font-semibold text-blue-900",children:s})]})]})]},"processing"),"complete"===f&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,a.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:(0,a.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(n.E.svg,{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.3},children:(0,a.jsx)(n.E.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-green-700 mb-2",children:"Payment Successful!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your transaction has been completed securely"})]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-green-800",children:"Amount Paid:"}),(0,a.jsxs)("span",{className:"font-bold text-green-900",children:["$",w.amount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-green-800",children:"Transaction ID:"}),(0,a.jsxs)("span",{className:"font-mono text-xs text-green-900",children:["TXN",Date.now()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-green-800",children:"Timestamp:"}),(0,a.jsx)("span",{className:"text-green-900",children:new Date().toLocaleTimeString()})]})]}),(0,a.jsx)(m.z,{onClick:()=>j("details"),variant:"outline",className:"w-full",children:"New Payment"})]},"complete")]})]})}}}]);
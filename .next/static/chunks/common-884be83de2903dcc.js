"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{42765:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(57437);a(2265);var i=a(88002),s=a(29162),o=a(53225),n=a(49354),l=a(48185);function c(e){let{title:t,value:a,change:c,changeType:d="neutral",icon:u,variant:m="default",loading:h=!1,className:g,trend:x}=e,b=(()=>{switch(m){case"revenue":case"success":return{card:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 dark:from-green-900/20 dark:to-emerald-900/20 dark:border-green-800/50",iconBg:"bg-gradient-to-br from-green-500 to-emerald-600",iconColor:"text-white"};case"users":return{card:"bg-gradient-to-br from-blue-50 to-cyan-50 border-blue-200 dark:from-blue-900/20 dark:to-cyan-900/20 dark:border-blue-800/50",iconBg:"bg-gradient-to-br from-blue-500 to-cyan-600",iconColor:"text-white"};case"transactions":return{card:"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200 dark:from-purple-900/20 dark:to-pink-900/20 dark:border-purple-800/50",iconBg:"bg-gradient-to-br from-purple-500 to-pink-600",iconColor:"text-white"};case"warning":return{card:"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200 dark:from-yellow-900/20 dark:to-orange-900/20 dark:border-yellow-800/50",iconBg:"bg-gradient-to-br from-yellow-500 to-orange-600",iconColor:"text-white"};case"error":return{card:"bg-gradient-to-br from-red-50 to-pink-50 border-red-200 dark:from-red-900/20 dark:to-pink-900/20 dark:border-red-800/50",iconBg:"bg-gradient-to-br from-red-500 to-pink-600",iconColor:"text-white"};default:return{card:"bg-white/80 backdrop-blur-xl border-white/20 shadow-xl dark:bg-gray-900/80 dark:border-gray-700/30",iconBg:"bg-gradient-to-br from-gray-500 to-gray-600",iconColor:"text-white"}}})();return h?(0,r.jsx)(l.Zb,{className:(0,n.cn)("p-6 animate-pulse",g),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-20"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-16"})]}),(0,r.jsx)("div",{className:"h-14 w-14 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})}):(0,r.jsxs)(l.Zb,{className:(0,n.cn)("p-6 transition-all duration-300 hover:shadow-xl hover:scale-105 cursor-pointer",b.card,g),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"space-y-3 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:t}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:a}),c&&(0,r.jsxs)("div",{className:(0,n.cn)("flex items-center gap-1 text-sm font-medium",(()=>{switch(d){case"positive":return"text-green-600 dark:text-green-400";case"negative":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}})()),children:[(()=>{switch(d){case"positive":return(0,r.jsx)(o.Z,{className:"h-3 w-3"});case"negative":return(0,r.jsx)(s.Z,{className:"h-3 w-3"});default:return(0,r.jsx)(i.Z,{className:"h-3 w-3"})}})(),(0,r.jsx)("span",{children:c})]})]})]}),(0,r.jsx)("div",{className:(0,n.cn)("h-14 w-14 rounded-xl shadow-lg flex items-center justify-center",b.iconBg),children:(0,r.jsx)(u,{className:(0,n.cn)("h-7 w-7",b.iconColor)})})]}),x&&x.length>0&&(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trend"}),(0,r.jsx)("div",{className:"flex items-end space-x-1 h-6",children:x.slice(-12).map((e,t)=>(0,r.jsx)("div",{className:(0,n.cn)("w-1 bg-gray-300 dark:bg-gray-600 rounded-full transition-all",e>0&&"bg-green-400 dark:bg-green-500",e<0&&"bg-red-400 dark:bg-red-500"),style:{height:"".concat(20*Math.abs(e)+4,"px")}},t))})]})})]})}},17901:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(57437);a(2265);var i=a(45745),s=a(25974),o=a(54142),n=a(35231),l=a(85475),c=a(2842),d=a(9542);function u(e){let{data:t,dataKey:a="value",xAxisKey:u="name",title:m,color:h="#10B981",height:g=300,showGrid:x=!0,showTooltip:b=!0}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[m&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:m}),(0,r.jsx)(n.h,{width:"100%",height:g,children:(0,r.jsxs)(s.v,{data:t,children:[x&&(0,r.jsx)(o.q,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),(0,r.jsx)(c.K,{dataKey:u,className:"text-gray-600 dark:text-gray-400"}),(0,r.jsx)(d.B,{className:"text-gray-600 dark:text-gray-400"}),b&&(0,r.jsx)(l.u,{contentStyle:{backgroundColor:"var(--tooltip-bg)",border:"1px solid var(--tooltip-border)",borderRadius:"6px",color:"var(--tooltip-color)"}}),(0,r.jsx)(i.$,{dataKey:a,fill:h,radius:[4,4,0,0]})]})})]})}},60899:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(57437);a(2265);var i=a(54142),s=a(16638),o=a(92566),n=a(35231),l=a(85475),c=a(2842),d=a(9542);function u(e){let{data:t,dataKey:a="value",xAxisKey:u="name",title:m,color:h="#3B82F6",height:g=300,showGrid:x=!0,showTooltip:b=!0}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[m&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:m}),(0,r.jsx)(n.h,{width:"100%",height:g,children:(0,r.jsxs)(o.w,{data:t,children:[x&&(0,r.jsx)(i.q,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"}),(0,r.jsx)(c.K,{dataKey:u,className:"text-gray-600 dark:text-gray-400"}),(0,r.jsx)(d.B,{className:"text-gray-600 dark:text-gray-400"}),b&&(0,r.jsx)(l.u,{contentStyle:{backgroundColor:"var(--tooltip-bg)",border:"1px solid var(--tooltip-border)",borderRadius:"6px",color:"var(--tooltip-color)"}}),(0,r.jsx)(s.x,{type:"monotone",dataKey:a,stroke:h,strokeWidth:2,dot:{fill:h,strokeWidth:2,r:4},activeDot:{r:6}})]})})]})}},60470:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(57437);a(2265);var i=a(68295),s=a(20153),o=a(85369),n=a(23909),l=a(35231),c=a(85475);let d=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];function u(e){let{data:t,title:a,height:u=300,showLegend:m=!0,showTooltip:h=!0,colors:g=d}=e,x=t.map((e,t)=>({...e,color:e.color||g[t%g.length]}));return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:a}),(0,r.jsx)(l.h,{width:"100%",height:u,children:(0,r.jsxs)(n.u,{children:[(0,r.jsx)(o.b,{data:x,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:x.map((e,t)=>(0,r.jsx)(i.b,{fill:e.color},"cell-".concat(t)))}),h&&(0,r.jsx)(c.u,{contentStyle:{backgroundColor:"var(--tooltip-bg)",border:"1px solid var(--tooltip-border)",borderRadius:"6px",color:"var(--tooltip-color)"}}),m&&(0,r.jsx)(s.D,{wrapperStyle:{paddingTop:"20px",fontSize:"14px"}})]})})]})}},12020:function(e,t,a){a.d(t,{Z:function(){return k}});var r=a(57437),i=a(2265),s=a(87138),o=a(16463),n=a(93409),l=a(6600),c=a(64590),d=a(56935),u=a(22023),m=a(87140),h=a(89896),g=a(42873),x=a(47390),b=a(54817),p=a(24258),f=a(36141),v=a(11240),y=a(26969),w=a(74697),j=a(49354);let N=[{name:"Dashboard",href:"/admin",icon:m.Z},{name:"Usuarios",href:"/admin/users",icon:v.Z},{name:"Transacciones",href:"/admin/transactions",icon:d.Z},{name:"Seguridad",href:"/admin/security",icon:f.Z},{name:"Analytics",href:"/admin/analytics",icon:n.Z},{name:"Configuraci\xf3n",href:"/admin/settings",icon:p.Z},{name:"Webhooks",href:"/admin/webhooks",icon:y.Z},{name:"Reportes",href:"/admin/reports",icon:u.Z},{name:"Soporte",href:"/admin/support",icon:x.Z},{name:"Auditor\xeda",href:"/admin/audit",icon:c.Z}];function k(e){let{children:t,title:a,description:n}=e,[c,d]=(0,i.useState)(!1),u=(0,o.usePathname)();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 dark:from-gray-900 dark:via-blue-900/10 dark:to-purple-900/10",children:[(0,r.jsxs)("div",{className:(0,j.cn)("fixed inset-0 z-50 lg:hidden",c?"block":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm",onClick:()=>d(!1)}),(0,r.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-full max-w-xs flex-col bg-white/90 backdrop-blur-xl border-r border-white/20 dark:bg-gray-900/90 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 border-b border-gray-200/50 dark:border-gray-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"FP"})}),(0,r.jsx)("span",{className:"ml-2 text-lg font-bold text-gray-900 dark:text-white",children:"FacePay Admin"})]}),(0,r.jsx)("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800",children:(0,r.jsx)(w.Z,{className:"h-6 w-6"})})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:N.map(e=>{let t=e.icon,a=u===e.href;return(0,r.jsxs)(s.default,{href:e.href,className:(0,j.cn)("flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200",a?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"text-gray-700 hover:text-gray-900 hover:bg-white/60 hover:shadow-md dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-800/60"),onClick:()=>d(!1),children:[(0,r.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,r.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,r.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col bg-white/90 backdrop-blur-xl border-r border-white/20 shadow-xl dark:bg-gray-900/90 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center px-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"FP"})}),(0,r.jsx)("span",{className:"ml-3 text-lg font-bold text-gray-900 dark:text-white",children:"FacePay Admin"})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:N.map(e=>{let t=e.icon,a=u===e.href;return(0,r.jsxs)(s.default,{href:e.href,className:(0,j.cn)("flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200",a?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"text-gray-700 hover:text-gray-900 hover:bg-white/60 hover:shadow-md dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-800/60"),children:[(0,r.jsx)(t,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,r.jsxs)("div",{className:"lg:pl-64 flex flex-col",children:[(0,r.jsxs)("div",{className:"sticky top-0 z-10 flex h-16 bg-white/90 backdrop-blur-xl border-b border-white/20 shadow-sm dark:bg-gray-900/90 dark:border-gray-700/30",children:[(0,r.jsx)("button",{onClick:()=>d(!0),className:"px-4 text-gray-400 hover:text-gray-600 hover:bg-gray-100/50 rounded-lg mx-2 my-2 transition-colors lg:hidden",children:(0,r.jsx)(g.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-between px-4 lg:px-6",children:[(0,r.jsx)("div",{className:"flex-1 max-w-lg",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(b.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar usuarios, transacciones...",className:"block w-full rounded-xl border-0 bg-gray-100/60 dark:bg-gray-800/60 py-2 pl-10 pr-4 text-gray-900 dark:text-white placeholder:text-gray-400 focus:bg-white dark:focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 sm:text-sm backdrop-blur-sm transition-all duration-200"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 ml-6",children:[(0,r.jsxs)("button",{className:"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100/50 rounded-lg transition-colors dark:hover:text-gray-300 dark:hover:bg-gray-800/50",children:[(0,r.jsx)(l.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),(0,r.jsxs)("button",{className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg px-3 py-2 transition-colors dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-800/50",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center shadow-sm",children:(0,r.jsx)("span",{className:"text-sm font-bold text-white",children:"A"})}),(0,r.jsx)("span",{className:"text-sm font-medium hidden sm:block",children:"Admin"})]}),(0,r.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors dark:hover:text-red-400 dark:hover:bg-red-900/20",children:(0,r.jsx)(h.Z,{className:"h-5 w-5"})})]})]})]}),a&&(0,r.jsx)("div",{className:"bg-white/50 backdrop-blur-xl border-b border-white/20 dark:bg-gray-900/50 dark:border-gray-700/30",children:(0,r.jsxs)("div",{className:"px-4 lg:px-6 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:a}),n&&(0,r.jsx)("p",{className:"mt-2 text-base text-gray-600 dark:text-gray-400 leading-relaxed",children:n})]})}),(0,r.jsx)("main",{className:"flex-1 p-4 lg:p-6",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl",children:t})})]})]})}},97730:function(e,t,a){a.d(t,{Z:function(){return x}});var r=a(57437),i=a(2265),s=a(9677),o=a(42421),n=a(70518),l=a(87592),c=a(14392),d=a(37164),u=a(65607),m=a(54817),h=a(74697),g=a(49354);function x(e){let{data:t,columns:a,title:x,searchable:b=!0,exportable:p=!0,filterable:f=!0,loading:v=!1,onExport:y}=e,[w,j]=(0,i.useState)([]),[N,k]=(0,i.useState)([]),[A,S]=(0,i.useState)(""),E=(0,s.b7)({data:t,columns:a,getCoreRowModel:(0,s.sC)(),getPaginationRowModel:(0,s.G_)(),getSortedRowModel:(0,s.tj)(),getFilteredRowModel:(0,s.vL)(),onSortingChange:j,onColumnFiltersChange:k,onGlobalFilterChange:S,state:{sorting:w,columnFilters:N,globalFilter:A}}),C=N.length+(A?1:0);return v?(0,r.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border border-white/20 shadow-xl rounded-2xl dark:bg-gray-900/80 dark:border-gray-700/30",children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-lg w-1/4"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded-lg"},t))]})})}):(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl border border-white/20 shadow-xl rounded-2xl overflow-hidden dark:bg-gray-900/80 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"px-6 py-6 border-b border-white/20 bg-gradient-to-r from-white/50 to-gray-50/50 dark:border-gray-700/30 dark:from-gray-900/50 dark:to-gray-800/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[x&&(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:x}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[E.getFilteredRowModel().rows.length," resultados encontrados"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[b&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"})}),(0,r.jsx)("input",{value:null!=A?A:"",onChange:e=>S(String(e.target.value)),className:"block w-64 pl-10 pr-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-xl text-sm placeholder-gray-400 bg-white/60 dark:bg-gray-800/60 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:bg-white dark:focus:bg-gray-700 backdrop-blur-sm transition-all duration-200",placeholder:"Buscar en la tabla..."})]}),f&&(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("button",{className:"inline-flex items-center px-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 bg-white/60 dark:bg-gray-800/60 hover:bg-white dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 backdrop-blur-sm transition-all duration-200",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Filtros",C>0&&(0,r.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:C})]})}),p&&(0,r.jsxs)("button",{onClick:y,className:"inline-flex items-center px-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 bg-white/60 dark:bg-gray-800/60 hover:bg-white dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 backdrop-blur-sm transition-all duration-200",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),C>0&&(0,r.jsx)("div",{className:"mt-3 flex items-center space-x-2",children:A&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:["Buscar: ",A,(0,r.jsx)("button",{onClick:()=>S(""),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800",children:(0,r.jsx)(h.Z,{className:"h-3 w-3"})})]})})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200/50 dark:divide-gray-700/50",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50/80 to-gray-100/80 dark:from-gray-800/80 dark:to-gray-900/80",children:E.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map(e=>(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:e.isPlaceholder?null:(0,r.jsxs)("div",{className:(0,g.cn)("flex items-center space-x-1",e.column.getCanSort()&&"cursor-pointer select-none hover:text-gray-700 dark:hover:text-gray-200"),onClick:e.column.getToggleSortingHandler(),children:[(0,r.jsx)("span",{children:(0,s.ie)(e.column.columnDef.header,e.getContext())}),e.column.getCanSort()&&(0,r.jsxs)("span",{className:"flex flex-col",children:[(0,r.jsx)(c.Z,{className:(0,g.cn)("h-3 w-3","asc"===e.column.getIsSorted()?"text-gray-700 dark:text-gray-300":"text-gray-400")}),(0,r.jsx)(o.Z,{className:(0,g.cn)("h-3 w-3 -mt-1","desc"===e.column.getIsSorted()?"text-gray-700 dark:text-gray-300":"text-gray-400")})]})]})},e.id))},e.id))}),(0,r.jsx)("tbody",{className:"bg-white/60 dark:bg-gray-900/60 divide-y divide-gray-200/30 dark:divide-gray-700/30",children:E.getRowModel().rows.map(e=>(0,r.jsx)("tr",{className:"hover:bg-white/80 dark:hover:bg-gray-800/60 transition-colors duration-150",children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:(0,s.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-white/50 to-gray-50/50 dark:from-gray-900/50 dark:to-gray-800/50 px-6 py-4 border-t border-white/20 dark:border-gray-700/30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:["Mostrando"," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white mx-1",children:E.getState().pagination.pageIndex*E.getState().pagination.pageSize+1}),"a"," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white mx-1",children:Math.min((E.getState().pagination.pageIndex+1)*E.getState().pagination.pageSize,E.getFilteredRowModel().rows.length)}),"de"," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white mx-1",children:E.getFilteredRowModel().rows.length}),"resultados"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>E.previousPage(),disabled:!E.getCanPreviousPage(),className:"relative inline-flex items-center px-3 py-2 rounded-l-xl border border-gray-300 dark:border-gray-600 bg-white/60 dark:bg-gray-800/60 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 backdrop-blur-sm",children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("span",{className:"relative inline-flex items-center px-4 py-2 border-t border-b border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 text-sm font-semibold text-gray-700 dark:text-gray-300 backdrop-blur-sm",children:["P\xe1gina ",E.getState().pagination.pageIndex+1," de ",E.getPageCount()]}),(0,r.jsx)("button",{onClick:()=>E.nextPage(),disabled:!E.getCanNextPage(),className:"relative inline-flex items-center px-3 py-2 rounded-r-xl border border-gray-300 dark:border-gray-600 bg-white/60 dark:bg-gray-800/60 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 backdrop-blur-sm",children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})]})]})})]})}},64813:function(e,t,a){a.d(t,{Z:function(){return N}});var r=a(57437),i=a(2265),s=a(48506),o=a(76780),n=a(80233),l=a(92940),c=a(75733),d=a(61989),u=a(3274),m=a(66706),h=a(36141),g=a(33907),x=a(58805),b=a(48298),p=a(74740),f=a(74697),v=a(50362),y=a(45900),w=a(90896),j=a(21424);function N(e){let{userId:t="demo-user",userName:a="demo@example.com",onSuccess:N,onError:k,onCancel:A,mode:S="authentication",title:E="FacePay Authentication",subtitle:C,className:I="",showFallbackOptions:T=!0,preferredMethod:W}=e,[R,P]=(0,i.useState)(null),[D,F]=(0,i.useState)("detecting"),[B,O]=(0,i.useState)("ready"),[Z,L]=(0,i.useState)(0),[U,M]=(0,i.useState)(null),[z,H]=(0,i.useState)(!1),[V,_]=(0,i.useState)(!1),[q,K]=(0,i.useState)(!1),[G,J]=(0,i.useState)(""),[Y,Q]=(0,i.useState)(!1),[$,X]=(0,i.useState)(0),[ee,et]=(0,i.useState)(!1),{toast:ea,success:er,error:ei,warning:es,info:eo,loading:en,dismiss:el,update:ec}=(0,w.p)(),ed=(0,i.useRef)(null),eu=(0,i.useRef)(null),em=(0,i.useRef)(null),eh=(0,i.useRef)(null),eg=(0,i.useRef)(null),ex=(0,i.useRef)(null),eb=(0,i.useCallback)(async()=>{try{O("ready"),M(null),_(!1),K(!1);let e=await (0,j.Fb)(y.G.checkBrowserCapabilities(),j.LS.QUICK_OPERATION,"Device capability check timed out","capabilities-check");P(e);let t="fallback";W?"biometric"===W&&e.isSupported&&e.isPlatformAuthenticatorAvailable?t="biometric":"camera"===W&&navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?t="camera":"demo"===W?(console.warn("[BiometricWithFallback] Demo mode requested but real biometric auth is preferred"),t=e.isSupported&&e.isPlatformAuthenticatorAvailable?"biometric":"camera"):t=W:e.isSupported&&e.isPlatformAuthenticatorAvailable?(t="biometric",console.log("[BiometricWithFallback] Auto-selected REAL biometric authentication")):navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(t="camera",console.log("[BiometricWithFallback] Biometric not available, using camera fallback")):(console.warn("[BiometricWithFallback] No biometric methods available, using demo fallback"),t="demo"),F(t),H(!0),console.log("[BiometricWithFallback] Initialized with method:",t,{webauthnSupported:e.isSupported,platformAuthAvailable:e.isPlatformAuthenticatorAvailable,biometricTypes:e.biometricTypes,device:e.deviceInfo})}catch(e){(0,j.q4)(e)?(console.warn("[BiometricWithFallback] Initialization timed out, using demo fallback"),J("Device check took too long. Using demo mode.")):console.warn("[BiometricWithFallback] Initialization failed, using demo fallback:",e),F("demo"),H(!0)}},[]),ep=(0,i.useCallback)(()=>{console.log("[BiometricWithFallback] Starting cleanup"),em.current&&(console.log("[BiometricWithFallback] Stopping camera stream"),em.current.getTracks().forEach(e=>{e.stop(),console.log("[BiometricWithFallback] Stopped track:",e.kind,e.readyState)}),em.current=null),eu.current&&(console.log("[BiometricWithFallback] Clearing video element"),eu.current.srcObject=null,eu.current.pause()),eh.current&&(console.log("[BiometricWithFallback] Clearing progress timer"),clearTimeout(eh.current),eh.current=null),eg.current&&(console.log("[BiometricWithFallback] Cancelling timeout handler"),eg.current.cancel(),eg.current=null),ex.current&&(console.log("[BiometricWithFallback] Aborting operations"),ex.current.abort(),ex.current=null),_(!1),K(!1),J(""),console.log("[BiometricWithFallback] Cleanup completed")},[]);(0,i.useEffect)(()=>(eb(),()=>{console.log("[BiometricWithFallback] Component unmounting, running cleanup"),ep()}),[eb,ep]);let ef=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;console.log("[BiometricWithFallback] Starting progress animation, duration:",e),L(0);let t=Date.now(),a=()=>{let r=Math.min((Date.now()-t)/e*100,100);L(r),r<100?eh.current=setTimeout(a,50):(console.log("[BiometricWithFallback] Progress animation completed, setting success state"),O("success"))};a()},[]),ev=(0,i.useCallback)(async()=>{if(!(null==R?void 0:R.isPlatformAuthenticatorAvailable))throw Error("Biometric authentication not available");console.log("[BiometricWithFallback] Starting REAL biometric authentication - NO SIMULATION"),O("processing"),M(null),_(!1),K(!1),ex.current=new AbortController,eg.current=new j.Oo(()=>{_(!0),K(!0),J((0,j.ld)("Real biometric authentication",j.LS.WEBAUTHN_OPERATION))},e=>L(e));try{let e,r;return console.log("[BiometricWithFallback] Executing REAL WebAuthn operation, mode:",S),"registration"===S?(console.log("[BiometricWithFallback] Starting REAL biometric registration..."),r=await eg.current.execute(()=>{var e;return y.G.register({userId:t,userName:a,userDisplayName:a},null===(e=ex.current)||void 0===e?void 0:e.signal)},j.LS.WEBAUTHN_OPERATION,"Real biometric registration timed out. Please try again.","webauthn-registration"),console.log("[BiometricWithFallback] REAL biometric registration completed successfully"),ef(1500),e={success:!0,method:"biometric",biometricType:R.biometricTypes[0]||"unknown",deviceInfo:{isIOS:R.deviceInfo.isIOS,isMobile:R.deviceInfo.isMobile,platform:R.deviceInfo.platform},timestamp:Date.now(),credentialId:r.id,verified:!0,type:"registration",realBiometric:!0}):(console.log("[BiometricWithFallback] Starting REAL biometric authentication..."),r=await eg.current.execute(()=>{var e;return y.G.authenticate({userId:t,email:a},null===(e=ex.current)||void 0===e?void 0:e.signal)},j.LS.WEBAUTHN_OPERATION,"Real biometric authentication timed out. Please try again.","webauthn-authentication"),console.log("[BiometricWithFallback] REAL biometric authentication completed successfully"),ef(1500),e={success:!0,method:"biometric",biometricType:R.biometricTypes[0]||"unknown",deviceInfo:{isIOS:R.deviceInfo.isIOS,isMobile:R.deviceInfo.isMobile,platform:R.deviceInfo.platform},timestamp:Date.now(),credentialId:r.id,verified:!0,type:"authentication",realBiometric:!0}),console.log("[BiometricWithFallback] REAL biometric operation completed successfully:",{method:e.method,type:e.type,credentialId:e.credentialId,realBiometric:e.realBiometric,timestamp:e.timestamp}),e}catch(t){console.error("[BiometricWithFallback] REAL biometric authentication failed:",t);let e=y.G.handleWebAuthnError(t);throw M(e),e}},[R,ef,S,t,a]),ey=(0,i.useCallback)(async()=>{console.log("[BiometricWithFallback] Starting camera authentication"),O("processing"),M(null),_(!1),K(!1),em.current&&(console.log("[BiometricWithFallback] Cleaning up existing camera stream"),em.current.getTracks().forEach(e=>{e.stop(),console.log("[BiometricWithFallback] Stopped track:",e.kind,e.readyState)}),em.current=null),ex.current=new AbortController,eg.current=new j.Oo(()=>{_(!0),K(!0),J((0,j.ld)("Camera initialization",j.LS.CAMERA_INIT))},e=>L(e));try{var e;if(!(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia))throw Error("Camera not supported on this device");console.log("[BiometricWithFallback] Requesting camera access");let t=await eg.current.execute(async()=>{var e;let t=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"},audio:!1});if(null===(e=ex.current)||void 0===e?void 0:e.signal.aborted)throw t.getTracks().forEach(e=>e.stop()),Error("Camera initialization was cancelled");return t},j.LS.CAMERA_INIT,"Camera initialization timed out. Please check camera permissions.","camera-initialization");if(eu.current&&t)console.log("[BiometricWithFallback] Setting up video element"),eu.current.srcObject=t,em.current=t,eu.current.playsInline=!0,eu.current.muted=!0,await new Promise((e,t)=>{let a=eu.current,r=()=>{console.log("[BiometricWithFallback] Video metadata loaded"),a.removeEventListener("loadedmetadata",r),a.removeEventListener("error",i),e(!0)},i=e=>{console.error("[BiometricWithFallback] Video error:",e),a.removeEventListener("loadedmetadata",r),a.removeEventListener("error",i),t(Error("Video failed to load"))};a.addEventListener("loadedmetadata",r),a.addEventListener("error",i),a.play().catch(t)}),console.log("[BiometricWithFallback] Camera successfully initialized, starting face detection");else throw Error("Video element not available");return console.log("[BiometricWithFallback] Starting face detection simulation"),await eg.current.execute(async()=>new Promise(e=>{ef(4e3),setTimeout(e,4e3)}),j.LS.FACE_DETECTION,"Face detection timed out. Please ensure your face is visible and well-lit.","face-detection"),{success:!0,method:"camera",deviceInfo:{isIOS:(null==R?void 0:R.deviceInfo.isIOS)||!1,isMobile:(null==R?void 0:R.deviceInfo.isMobile)||!1,platform:(null==R?void 0:R.deviceInfo.platform)||"unknown"},timestamp:Date.now()}}catch(t){let e;throw console.error("[BiometricWithFallback] Camera authentication failed:",t),em.current&&(em.current.getTracks().forEach(e=>e.stop()),em.current=null),M(e=(0,j.q4)(t)?{code:"CAMERA_TIMEOUT",message:t.message,isRecoverable:!0,suggestedAction:"Camera operation timed out. Please try again or use demo mode."}:{code:"CAMERA_ERROR",message:t instanceof Error?t.message:"Camera access failed",isRecoverable:!0,suggestedAction:"Please allow camera access or try demo mode"}),e}},[R,ef,ep]),ew=(0,i.useCallback)(async()=>(O("processing"),M(null),_(!1),K(!1),ex.current=new AbortController,eg.current=new j.Oo(()=>{_(!0),K(!0),J("Demo is taking longer than usual...")},e=>L(e)),await eg.current.execute(async()=>new Promise(e=>{ef(3500),setTimeout(e,3500)}),2*j.LS.QUICK_OPERATION,"Demo timed out unexpectedly.","demo-authentication"),{success:!0,method:"demo",deviceInfo:{isIOS:(null==R?void 0:R.deviceInfo.isIOS)||!1,isMobile:(null==R?void 0:R.deviceInfo.isMobile)||!1,platform:(null==R?void 0:R.deviceInfo.platform)||"demo"},timestamp:Date.now()}),[R,ef]),ej=(0,i.useCallback)(async e=>{let t=e||D;if(Y){es("Authentication in progress","Please wait for the current authentication to complete.");return}try{let e;switch(X(e=>e+1),Q(!0),ee&&console.log("[BiometricWithFallback] Starting authentication with method:",t,{retryCount:$+1}),t){case"biometric":e=await ev();break;case"camera":e=await ey();break;case"demo":e=await ew();break;default:throw Error("Invalid authentication method: ".concat(t))}Q(!1),X(0),ed.current&&el(ed.current);let a="biometric"===e.method?"face"===e.biometricType?"Real Face ID":"Real Touch ID":"camera"===e.method?"Camera Scan":"Visual Demo",r=e.realBiometric?"".concat(a," authentication completed successfully - REAL biometric verification used!"):"".concat(a," authentication completed successfully.");er("Real Authentication Successful!",r),ee&&console.log("[BiometricWithFallback] Authentication successful:",e),setTimeout(()=>{ee&&console.log("[BiometricWithFallback] Calling onSuccess callback"),null==N||N(e)},2e3)}catch(e){Q(!1),ee&&console.error("[BiometricWithFallback] Authentication failed:",e),"demo"!==t&&$<2?(console.log("[BiometricWithFallback] Method failed, falling back to demo:",e),es("Switching to backup method","".concat(t," authentication failed. Switching to Visual Demo as backup.")),F("demo"),setTimeout(()=>ej("demo"),2e3)):(O("error"),ed.current&&el(ed.current),null==k||k(e))}},[D,ev,ey,ew,N,k,Y,$,ee,es,er,el]),eN=(0,i.useCallback)(e=>{console.log("[BiometricWithFallback] Switching method from",D,"to",e),ep(),setTimeout(()=>{F(e),O("ready"),M(null),L(0),console.log("[BiometricWithFallback] Method switched to:",e)},100)},[ep,D]),ek=(0,i.useCallback)(()=>{console.log("[BiometricWithFallback] Cancelling current operation"),eg.current&&eg.current.cancel(),ex.current&&ex.current.abort(),ep(),O("ready"),M(null),L(0),_(!1),K(!1),J(""),console.log("[BiometricWithFallback] Operation cancelled successfully")},[ep]),eA=(0,i.useCallback)(()=>{if(!R)return{icon:h.Z,name:"Loading...",description:"Checking capabilities..."};switch(D){case"detecting":return{icon:u.Z,name:"Detecting...",description:"Checking device capabilities"};case"biometric":let e=R.biometricTypes[0];return{icon:"face"===e?c.Z:d.Z,name:R.deviceInfo.isIOS?"face"===e?"Face ID":"Touch ID":"face"===e?"Face Recognition":"Biometric",description:"Use your ".concat("face"===e?"face":"fingerprint"," to authenticate securely")};case"camera":return{icon:n.Z,name:"Camera Scan",description:"Look into the camera for face detection"};case"demo":return{icon:g.Z,name:"Visual Demo",description:"Experience how biometric authentication works"};default:return{icon:h.Z,name:"Authentication",description:"Choose your preferred method"}}},[R,D])();return z?(0,r.jsxs)("div",{className:"w-full max-w-lg mx-auto p-6 ".concat(I),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:E}),C&&(0,r.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:C})]}),A&&(0,r.jsx)(v.z,{onClick:A,variant:"ghost",size:"sm",children:(0,r.jsx)(f.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:["camera"===D&&(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("video",{ref:eu,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-64 object-cover rounded-lg",style:{display:em.current?"block":"none"},onError:e=>{console.error("[BiometricWithFallback] Video error:",e),M({code:"CAMERA_ERROR",message:"Video playback failed",isRecoverable:!0,suggestedAction:"Please try demo mode"})},onLoadedMetadata:()=>{console.log("[BiometricWithFallback] Video metadata loaded")}}),!em.current&&"camera"===D&&(0,r.jsx)("div",{className:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-gray-600",children:[(0,r.jsx)(n.Z,{className:"w-12 h-12 mx-auto mb-2"}),(0,r.jsx)("p",{children:"Initializing camera..."})]})}),em.current&&(0,r.jsx)("button",{onClick:()=>{console.log("[BiometricWithFallback] User cancelled camera"),ep(),eN("demo")},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-lg transition-colors",children:(0,r.jsx)(f.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-900 to-purple-900 rounded-2xl aspect-square flex items-center justify-center overflow-hidden",children:[(0,r.jsx)(s.EA.div,{className:"relative z-10",animate:{scale:"processing"===B?[1,1.05,1]:1,rotate:eA.icon===u.Z?[0,360]:0},transition:{scale:{duration:2,repeat:"processing"===B?1/0:0},rotate:{duration:2,repeat:eA.icon===u.Z?1/0:0,ease:"linear"}},children:(0,r.jsx)("div",{className:"w-24 h-24 bg-blue-500/20 rounded-full flex items-center justify-center backdrop-blur",children:(0,r.jsx)(eA.icon,{className:"w-12 h-12 text-blue-300"})})}),"processing"===B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.EA.div,{className:"absolute inset-8 border-2 border-blue-400 rounded-full",animate:{scale:[1,1.1,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),(0,r.jsx)(s.EA.div,{className:"absolute inset-12 border border-blue-300 rounded-full",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"}})]}),"success"===B&&(0,r.jsxs)(s.EA.div,{className:"absolute inset-0 bg-green-500/20 rounded-2xl flex items-center justify-center overflow-hidden",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:200,damping:15},children:[(0,r.jsx)(s.EA.div,{className:"absolute inset-0 bg-gradient-to-r from-green-400/30 to-emerald-400/30 rounded-2xl",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,2],opacity:[.8,.4,0]},transition:{duration:1.2,ease:"easeOut"}}),(0,r.jsx)(s.EA.div,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:300,damping:20,delay:.1},children:(0,r.jsx)(l.Z,{className:"w-16 h-16 text-green-400 relative z-10"})})]}),"processing"===B&&(0,r.jsx)(s.EA.div,{className:"absolute left-8 right-8 h-0.5 bg-gradient-to-r from-transparent via-blue-400 to-transparent",animate:{y:[32,"75%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})]}),"processing"===B&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("div",{className:"bg-gray-200 rounded-full h-2",children:(0,r.jsx)(s.EA.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",initial:{width:"0%"},animate:{width:"".concat(Z,"%")},transition:{duration:.3}})}),(0,r.jsxs)("div",{className:"text-center mt-2",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:[Math.round(Z),"% Complete"]}),V&&(0,r.jsxs)("p",{className:"text-xs text-yellow-600 mt-1 flex items-center justify-center",children:[(0,r.jsx)(b.Z,{className:"w-3 h-3 mr-1"}),"Taking longer than expected..."]})]})]})]}),"error"===B?(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-red-500",children:[(0,r.jsx)(o.Z,{className:"w-8 h-8"}),(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Authentication Failed"})]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-red-700 font-medium",children:null==U?void 0:U.message}),(0,r.jsx)("p",{className:"text-red-600 text-sm mt-1",children:null==U?void 0:U.suggestedAction})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(null==U?void 0:U.isRecoverable)&&(0,r.jsx)(v.z,{onClick:()=>{console.log("[BiometricWithFallback] Retrying authentication"),ep(),setTimeout(()=>{M(null),O("ready"),ej()},500)},disabled:Y,className:"flex items-center gap-2 disabled:opacity-50",children:Y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 animate-spin"}),"Retrying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),"Try Again ",$>0&&"(".concat($,")")]})}),(0,r.jsxs)(v.z,{onClick:()=>eN("demo"),variant:"outline",disabled:Y||"demo"===D,className:"flex items-center gap-2 disabled:opacity-50",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4"}),"Use Visual Demo"]})]})]}):(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["ready"===B&&eA.name,"processing"===B&&"".concat("registration"===S?"Registering":"Authenticating","..."),"success"===B&&"Success!","error"===B&&"Authentication Failed"]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["ready"===B&&eA.description,"processing"===B&&!V&&"Please follow the prompts on your device","processing"===B&&V&&(G||"Operation is taking longer than expected..."),"success"===B&&"".concat("registration"===S?"Registration":"Authentication"," completed successfully"),"error"===B&&(null==U?void 0:U.message)]}),"processing"===B&&q&&(0,r.jsxs)(v.z,{onClick:ek,variant:"outline",className:"flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Cancel Operation"]}),"ready"===B&&(0,r.jsx)(v.z,{onClick:()=>ej(),disabled:Y,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",size:"lg",children:Y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"registration"===S?"Register":"Authenticate"}),"processing"===B&&(0,r.jsxs)(v.z,{onClick:()=>{console.log("[BiometricWithFallback] User cancelled during processing"),ep(),O("ready"),M(null)},variant:"outline",size:"sm",className:"flex items-center gap-2 text-red-600 border-red-200 hover:bg-red-50",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Cancel"]}),"ready"===B&&T&&(T?(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,r.jsxs)(v.z,{onClick:()=>eN("demo"),variant:"demo"===D?"default":"outline",size:"sm",disabled:Y,className:"flex items-center gap-2 disabled:opacity-50",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4"}),"Visual Demo"]}),(null==R?void 0:R.isPlatformAuthenticatorAvailable)&&(0,r.jsxs)(v.z,{onClick:()=>eN("biometric"),variant:"biometric"===D?"default":"outline",size:"sm",disabled:Y,className:"flex items-center gap-2 disabled:opacity-50",children:[R.biometricTypes.includes("face")?(0,r.jsx)(c.Z,{className:"w-4 h-4"}):(0,r.jsx)(d.Z,{className:"w-4 h-4"}),R.deviceInfo.isIOS?"Device ID":"Biometrics"]}),"undefined"!=typeof navigator&&navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&(0,r.jsxs)(v.z,{onClick:()=>eN("camera"),variant:"camera"===D?"default":"outline",size:"sm",disabled:Y,className:"flex items-center gap-2 disabled:opacity-50",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),"Camera"]})]}):null)]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-center items-center space-x-4 text-sm text-gray-500",children:[R&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(R.isPlatformAuthenticatorAvailable?"bg-green-500":"bg-yellow-500")}),(0,r.jsx)("span",{children:R.isPlatformAuthenticatorAvailable?"Biometrics Ready":"Demo Mode"})]}),!navigator.onLine&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Offline Mode"})]})]}),(0,r.jsx)(s.M_,{children:"success"===B&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{type:"spring",stiffness:300,damping:25,opacity:{duration:.3},scale:{duration:.4}},className:"mt-6 p-6 bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl text-center relative overflow-hidden",children:[(0,r.jsx)(s.EA.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,.3,0]},transition:{duration:1.5,ease:"easeOut"},className:"absolute inset-0 bg-gradient-to-r from-green-400 to-emerald-400 rounded-2xl"}),(0,r.jsx)(s.EA.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.2},children:(0,r.jsx)(l.Z,{className:"w-12 h-12 text-green-500 mx-auto mb-4 relative z-10"})}),(0,r.jsx)(s.EA.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},className:"text-lg font-bold text-green-800 mb-2 relative z-10",children:"registration"===S?"Registration Complete!":"Authentication Successful!"}),(0,r.jsx)(s.EA.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.3},className:"text-green-700 relative z-10",children:"demo"===D?"This was a demonstration of how biometric authentication would work.":"biometric"===D?"REAL biometric authentication completed! Your Face ID/Touch ID was successfully verified.":"You can now proceed with secure transactions."}),(0,r.jsx)(s.EA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},className:"mt-4 relative z-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[(0,r.jsx)(s.EA.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,r.jsx)(l.Z,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Redirecting to payment..."})]})}),(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:8},(e,t)=>(0,r.jsx)(s.EA.div,{className:"absolute w-1 h-1 bg-green-400 rounded-full",initial:{x:"50%",y:"50%",scale:0,opacity:0},animate:{x:"".concat(30+40*Math.random(),"%"),y:"".concat(20+60*Math.random(),"%"),scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.5+.5*Math.random(),ease:"easeOut"}},t))})]})})]}):(0,r.jsx)("div",{className:"w-full max-w-lg mx-auto p-6 ".concat(I),children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,r.jsx)(u.Z,{className:"w-12 h-12 text-blue-600 animate-spin"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Initializing authentication..."})]})})}},55179:function(e,t,a){a.d(t,{Z:function(){return k}});var r=a(57437),i=a(2265),s=a(48506),o=a(6600),n=a(13231),l=a(56935),c=a(61989),d=a(71568),u=a(83852),m=a(74453),h=a(89896),g=a(42873),x=a(98039),b=a(54817),p=a(24258),f=a(36141),v=a(8400),y=a(52022),w=a(74697),j=a(50362),N=a(45900);function k(e){let{children:t,activeTab:a="dashboard",user:k={name:"John Doe",email:"john@example.com",isAuthenticated:!0,biometricEnabled:!1}}=e,[A,S]=(0,i.useState)(!1),[E,C]=(0,i.useState)(!1),[I,T]=(0,i.useState)({isAvailable:!1,isEnabled:!1,isAuthenticated:!1}),[W,R]=(0,i.useState)(!0),[P,D]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{C(window.innerWidth<1024),window.innerWidth>=1024&&S(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{F()},[]);let F=(0,i.useCallback)(async()=>{R(!0);try{let e=await N.G.checkBrowserCapabilities();T({isAvailable:e.isSupported&&e.isPlatformAuthenticatorAvailable,isEnabled:k.biometricEnabled,isAuthenticated:k.isAuthenticated,deviceInfo:e})}catch(e){console.error("Error checking biometric capabilities:",e),T({isAvailable:!1,isEnabled:!1,isAuthenticated:!1})}finally{R(!1)}},[k.biometricEnabled,k.isAuthenticated]),B=[{id:"dashboard",name:"Dashboard",icon:u.Z,href:"/dashboard"},{id:"payments",name:"Payments",icon:l.Z,href:"/payments"},{id:"history",name:"History",icon:d.Z,href:"/history"},{id:"biometric",name:"Biometric Demo",icon:c.Z,href:"/biometric"},{id:"security",name:"Security",icon:f.Z,href:"/security"},{id:"profile",name:"Profile",icon:y.Z,href:"/profile"},{id:"settings",name:"Settings",icon:p.Z,href:"/settings"}],O=()=>{if(!I.deviceInfo)return c.Z;let{biometricTypes:e,deviceInfo:t}=I.deviceInfo;return e.includes("face")?x.Z:e.includes("fingerprint")?c.Z:t.isMobile?v.Z:m.Z},Z=()=>{if(!I.deviceInfo)return"Biometric";let{biometricTypes:e,deviceInfo:t}=I.deviceInfo;return e.includes("face")?t.isIOS?"Face ID":"Face Recognition":e.includes("fingerprint")?t.isIOS?"Touch ID":"Fingerprint":t.isMacOS?"Touch ID":t.isWindows?"Windows Hello":"Biometric Auth"},L=()=>{E&&S(!1)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)(s.M_,{children:A&&E&&(0,r.jsx)(s.EA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:L})}),(0,r.jsx)(s.EA.div,{initial:!1,animate:{x:E?A?0:"-100%":0,width:E?"280px":"256px"},transition:{duration:.3,ease:"easeInOut"},className:"".concat(E?"fixed inset-y-0 left-0 z-50":"relative"," w-64 bg-white shadow-xl border-r border-gray-200"),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,r.jsx)("span",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"FacePay"})]}),E&&(0,r.jsx)("button",{onClick:L,className:"p-1.5 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(w.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("nav",{className:"flex-1 mt-6 px-3 sm:px-4 space-y-1 overflow-y-auto",children:[B.map(e=>{let t=e.icon,i=a===e.id;return(0,r.jsxs)(s.EA.a,{href:e.href,onClick:L,className:"flex items-center px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-200 ".concat(i?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-r-2 border-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),whileHover:{x:2},whileTap:{scale:.98},children:[(0,r.jsx)(t,{className:"w-5 h-5 mr-3 flex-shrink-0 transition-colors ".concat(i?"text-blue-700":"text-gray-400")}),(0,r.jsx)("span",{className:"truncate",children:e.name}),i&&(0,r.jsx)(s.EA.div,{className:"ml-auto w-1.5 h-1.5 bg-blue-700 rounded-full",initial:{scale:0},animate:{scale:1},transition:{delay:.1}})]},e.id)}),(0,r.jsxs)("div",{className:"pt-4 mt-4 border-t border-gray-200",children:[(0,r.jsx)("div",{className:"px-3 sm:px-4 mb-2",children:(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Security"})}),(0,r.jsx)(s.EA.div,{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-3 mx-3 sm:mx-4 mb-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat(I.isAuthenticated?"bg-green-100":I.isAvailable?"bg-blue-100":"bg-gray-100"),children:W?(0,r.jsx)(s.EA.div,{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):i.createElement(O(),{className:"w-4 h-4 ".concat(I.isAuthenticated?"text-green-600":I.isAvailable?"text-blue-600":"text-gray-400")})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:Z()}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:W?"Checking...":I.isAuthenticated?"Authenticated":I.isAvailable?"Available":"Not supported"})]}),I.isAuthenticated&&(0,r.jsx)(n.Z,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),I.isAvailable&&!I.isEnabled&&(0,r.jsx)(s.EA.button,{onClick:()=>{D(!0)},className:"text-blue-600 hover:text-blue-700 text-xs font-medium px-2 py-1 rounded hover:bg-blue-50 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Setup"})]})})]})]}),(0,r.jsx)("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:(0,r.jsxs)(s.EA.div,{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer group",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,r.jsxs)("div",{className:"relative w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:[k.avatar?(0,r.jsx)("img",{src:k.avatar,alt:k.name,className:"w-full h-full rounded-full object-cover"}):(0,r.jsx)("span",{className:"text-white font-medium text-sm",children:k.name.split(" ").map(e=>e[0]).join("")}),(0,r.jsx)(s.EA.div,{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white ".concat(k.isAuthenticated?"bg-green-500":"bg-gray-400"),initial:{scale:0},animate:{scale:1},transition:{delay:.2}})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate group-hover:text-gray-700 transition-colors",children:k.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:k.email}),I.isAuthenticated&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},className:"flex items-center text-xs text-green-600",children:[(0,r.jsx)(n.Z,{className:"w-3 h-3 mr-1"}),"Secured"]})]})]}),E&&(0,r.jsx)(s.EA.button,{className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})})]})})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,r.jsx)(s.EA.header,{className:"bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-200 px-4 sm:px-6 py-3 sm:py-4 sticky top-0 z-30",initial:{y:-100},animate:{y:0},transition:{duration:.3},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[(0,r.jsx)(s.EA.button,{onClick:()=>S(!0),className:"lg:hidden p-2 -ml-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(g.Z,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,r.jsxs)(s.EA.div,{className:"relative flex-1 max-w-md",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,r.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search transactions, contacts...",className:"pl-10 pr-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full text-sm bg-gray-50/80 focus:bg-white transition-all duration-200 backdrop-blur-sm"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)(s.M_,{children:!E&&I.isAvailable&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"hidden sm:flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(I.isAuthenticated?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:[i.createElement(O(),{className:"w-3 h-3"}),(0,r.jsx)("span",{children:I.isAuthenticated?"Secured":Z()})]})}),(0,r.jsxs)(s.EA.button,{className:"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,r.jsx)(s.EA.span,{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]}),(0,r.jsx)(s.EA.div,{className:"hidden sm:flex items-center space-x-2 cursor-pointer p-1 rounded-lg hover:bg-gray-100 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:(0,r.jsxs)("div",{className:"relative w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:[k.avatar?(0,r.jsx)("img",{src:k.avatar,alt:k.name,className:"w-full h-full rounded-full object-cover"}):(0,r.jsx)("span",{className:"text-white font-medium text-xs",children:k.name.split(" ").map(e=>e[0]).join("")}),k.isAuthenticated&&(0,r.jsx)(s.EA.div,{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-green-500 rounded-full border border-white",initial:{scale:0},animate:{scale:1},transition:{delay:.3}})]})})]})]})}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50/30",children:(0,r.jsx)(s.EA.div,{className:"h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:t})}),(0,r.jsx)(s.M_,{children:P&&(0,r.jsx)(s.EA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>D(!1),children:(0,r.jsx)(s.EA.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:i.createElement(O(),{className:"w-8 h-8 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Setup ",Z()]}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:["Secure your account with ",Z()," for faster and more secure authentication."]})]}),(0,r.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,r.jsxs)(j.z,{className:"w-full",onClick:()=>{D(!1)},children:["Setup ",Z()]}),(0,r.jsx)(j.z,{variant:"outline",className:"w-full",onClick:()=>D(!1),children:"Maybe Later"})]})]})})})})]})]})}},82768:function(e,t,a){a.d(t,{mW:function(){return b},Pl:function(){return x},default:function(){return g}});var r=a(57437),i=a(2265),s=a(48506),o=a(36127),n=a(64142),l=a(22468),c=a(6884),d=a(83852),u=a(66706),m=a(50362);let h=e=>{let{error:t,errorInfo:a,resetError:i,showDetails:h,toggleDetails:g,copyError:x,copied:b,isReporting:p,reportSent:f,enableReporting:v,enableDebugMode:y}=e;return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:(0,r.jsxs)(s.EA.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl border border-red-200 overflow-hidden max-w-2xl w-full",children:[(0,r.jsx)("div",{className:"bg-red-500 text-white px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(s.EA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"bg-white/20 p-3 rounded-full",children:(0,r.jsx)(o.Z,{className:"w-8 h-8"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Oops! Something went wrong"}),(0,r.jsx)("p",{className:"text-red-100 mt-1",children:"An unexpected error occurred while processing your request"})]})]})}),(0,r.jsx)("div",{className:"px-8 py-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"Error Details"}),(0,r.jsx)("p",{className:"text-red-700 text-sm font-mono",children:(null==t?void 0:t.message)||"Unknown error occurred"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)(m.z,{onClick:i,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"Try Again"]}),(0,r.jsxs)(m.z,{onClick:()=>window.location.href="/",variant:"outline",className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),"Go Home"]}),(0,r.jsxs)(m.z,{onClick:g,variant:"outline",className:"flex items-center gap-2",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),h?"Hide":"Show"," Details"]})]}),v&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[p&&(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Reporting error..."]}),f&&(0,r.jsxs)("p",{className:"flex items-center gap-2 text-green-600",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Error reported successfully. Our team has been notified."]})]}),h&&(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Technical Details"}),(0,r.jsx)(m.z,{onClick:x,variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:b,children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Copied!"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),"Copy Details"]})})]}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-xs overflow-auto max-h-96",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-yellow-400 font-bold",children:"Error Message:"}),(0,r.jsx)("div",{className:"mt-1 pl-4 border-l-2 border-red-400",children:null==t?void 0:t.message})]}),(null==t?void 0:t.stack)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-yellow-400 font-bold",children:"Stack Trace:"}),(0,r.jsx)("div",{className:"mt-1 pl-4 border-l-2 border-blue-400 whitespace-pre-wrap",children:t.stack})]}),(null==a?void 0:a.componentStack)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-yellow-400 font-bold",children:"Component Stack:"}),(0,r.jsx)("div",{className:"mt-1 pl-4 border-l-2 border-purple-400 whitespace-pre-wrap",children:a.componentStack})]}),y&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-yellow-400 font-bold",children:"Environment:"}),(0,r.jsxs)("div",{className:"mt-1 pl-4 border-l-2 border-green-400",children:[(0,r.jsxs)("div",{children:["Timestamp: ",new Date().toISOString()]}),(0,r.jsxs)("div",{children:["URL: ",window.location.href]}),(0,r.jsxs)("div",{children:["User Agent: ",navigator.userAgent]})]})]})]})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"What can you do?"}),(0,r.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,r.jsx)("li",{children:'Try refreshing the page or clicking "Try Again"'}),(0,r.jsx)("li",{children:"Check your internet connection"}),(0,r.jsx)("li",{children:"Clear your browser cache and cookies"}),(0,r.jsx)("li",{children:"If the problem persists, contact support with the error details above"})]})]})]})})]})})};class g extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.props.enableReporting&&this.reportError(e,t)}render(){if(this.state.hasError){let e=this.props.fallback||h;return(0,r.jsx)(e,{error:this.state.error,errorInfo:this.state.errorInfo,resetError:this.resetError,showDetails:this.state.showDetails,toggleDetails:this.toggleDetails,copyError:this.copyError,copied:this.state.copied,isReporting:this.state.isReporting,reportSent:this.state.reportSent,enableReporting:this.props.enableReporting||!1,enableDebugMode:this.props.enableDebugMode||!1})}return this.props.children}constructor(e){super(e),this.reportError=async(e,t)=>{if(!this.state.isReporting&&!this.state.reportSent){this.setState({isReporting:!0});try{let a={message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:localStorage.getItem("userId")||"anonymous"};await fetch("/api/errors/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),this.setState({reportSent:!0})}catch(e){console.error("Failed to report error:",e)}finally{this.setState({isReporting:!1})}}},this.resetError=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,showDetails:!1,reportSent:!1,copied:!1})},this.toggleDetails=()=>{this.setState(e=>({showDetails:!e.showDetails}))},this.copyError=async()=>{let{error:e,errorInfo:t}=this.state;if(!e)return;let a="\nError: ".concat(e.message,"\n\nStack Trace:\n").concat(e.stack,"\n\nComponent Stack:\n").concat(null==t?void 0:t.componentStack,"\n\nTimestamp: ").concat(new Date().toISOString(),"\nURL: ").concat(window.location.href,"\nUser Agent: ").concat(navigator.userAgent,"\n    ").trim();try{await navigator.clipboard.writeText(a),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)}catch(e){console.error("Failed to copy error details:",e)}},this.state={hasError:!1,showDetails:!1,isReporting:!1,reportSent:!1,copied:!1}}}class x extends Error{constructor(e,t,a){super(e),this.code=t,this.details=a,this.name="PaymentError"}}class b extends Error{constructor(e,t,a=!0){super(e),this.code=t,this.retry=a,this.name="BiometricError"}}},882:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(57437),i=a(2265),s=a(48506);function o(e){let{isScanning:t=!1,onScanComplete:a,size:o="md",className:n=""}=e,[l,c]=(0,i.useState)(0),[d,u]=(0,i.useState)("idle");return(0,i.useEffect)(()=>{if(t&&"idle"===d){u("detecting"),c(0);let e=setTimeout(()=>{u("scanning");let e=setInterval(()=>{c(t=>t>=100?(clearInterval(e),u("complete"),setTimeout(()=>{null==a||a(),u("idle"),c(0)},1e3),100):t+2)},50);return()=>clearInterval(e)},1500);return()=>clearTimeout(e)}},[t,d,a]),(0,r.jsxs)("div",{className:"relative flex items-center justify-center ".concat({sm:"w-24 h-24",md:"w-32 h-32",lg:"w-48 h-48"}[o]," ").concat(n),children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)(s.EA.div,{className:"border-2 border-blue-500 rounded-full aspect-square",style:{width:"100%",height:"100%"},animate:{borderColor:"complete"===d?"#10B981":"scanning"===d?"#3B82F6":"detecting"===d?"#F59E0B":"#6B7280"},transition:{duration:.3},children:[(0,r.jsx)(s.M_,{children:"detecting"===d&&(0,r.jsx)(r.Fragment,{children:[0,1,2].map(e=>(0,r.jsx)(s.EA.div,{className:"absolute inset-0 border-2 border-yellow-400 rounded-full face-detection-ring",initial:{scale:.8,opacity:1},animate:{scale:1.4,opacity:0},exit:{scale:1.4,opacity:0},transition:{duration:1.5,delay:.5*e,repeat:"detecting"===d?1/0:0}},e))})}),"scanning"===d&&(0,r.jsx)("div",{className:"absolute inset-2 flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,r.jsx)("circle",{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"rgba(59, 130, 246, 0.2)",strokeWidth:"2"}),(0,r.jsx)(s.EA.circle,{cx:"50%",cy:"50%",r:"45%",fill:"none",stroke:"#3B82F6",strokeWidth:"2",strokeDasharray:"283",initial:{strokeDashoffset:283},animate:{strokeDashoffset:283-283*l/100},transition:{duration:.1}})]})}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"relative w-3/5 h-3/5",children:[(0,r.jsx)(s.EA.div,{className:"absolute top-1/3 left-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===d?"#10B981":"#3B82F6",scale:"scanning"===d?[1,1.2,1]:1},transition:{duration:.5,repeat:"scanning"===d?1/0:0}}),(0,r.jsx)(s.EA.div,{className:"absolute top-1/3 right-1/4 w-2 h-2 bg-blue-500 rounded-full",animate:{backgroundColor:"complete"===d?"#10B981":"#3B82F6",scale:"scanning"===d?[1,1.2,1]:1},transition:{duration:.5,delay:.1,repeat:"scanning"===d?1/0:0}}),(0,r.jsx)(s.EA.div,{className:"absolute bottom-1/3 left-1/2 transform -translate-x-1/2 w-4 h-2 border-b-2 border-blue-500 rounded-b-full",animate:{borderColor:"complete"===d?"#10B981":"#3B82F6"}})]})}),(0,r.jsx)(s.M_,{children:"complete"===d&&(0,r.jsx)(s.EA.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:(0,r.jsx)(s.EA.svg,{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5},children:(0,r.jsx)(s.EA.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]})}),(0,r.jsx)("div",{className:"absolute -bottom-8 text-center",children:(0,r.jsxs)(s.EA.p,{className:"text-sm font-medium",animate:{color:"complete"===d?"#10B981":"scanning"===d?"#3B82F6":"detecting"===d?"#F59E0B":"#6B7280"},children:["idle"===d&&"Ready to scan","detecting"===d&&"Detecting face...","scanning"===d&&"Scanning... ".concat(l,"%"),"complete"===d&&"Complete!"]})})]})}},59379:function(e,t,a){a.d(t,{Z:function(){return m}});var r=a(57437),i=a(2265),s=a(48506),o=a(56935),n=a(51077),l=a(74453),c=a(36141),d=a(50362),u=a(882);function m(e){let{amount:t,recipient:a,description:m,onSuccess:h,onCancel:g,onPaymentComplete:x}=e,[b,p]=(0,i.useState)("details"),[f,v]=(0,i.useState)(!1),[y,w]=(0,i.useState)("face"),[j,N]=(0,i.useState)({amount:t,description:m||"",paymentMethod:"face"}),k=async e=>{e.preventDefault(),"face"===y?(p("verification"),v(!0)):"card"===y&&await A()},A=async()=>{try{p("processing");let e=await fetch("/api/payments/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify({amount:j.amount,description:j.description||"FacePay Payment",metadata:{recipient:a||"N/A",paymentMethod:"stripe_checkout"}})});if(!e.ok)throw Error("Failed to create checkout session");let{data:t}=await e.json();t.sessionUrl&&(window.location.href=t.sessionUrl)}catch(e){console.error("Stripe checkout error:",e),p("details")}};return(0,r.jsxs)("div",{className:"max-w-md mx-auto card-premium p-8 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2 tracking-tight",children:"Secure Payment"}),(0,r.jsx)("p",{className:"text-gray-600 text-base",children:"Complete your transaction with biometric verification"})]}),(0,r.jsx)("div",{className:"flex justify-between items-center bg-gray-50/50 rounded-2xl p-4 dark:bg-gray-800/50",children:["Details","Verify","Process","Complete"].map((e,t)=>{let a=["details","verification","processing","complete"].indexOf(b),i=t<=a;return(0,r.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,r.jsx)(s.EA.div,{className:"w-10 h-10 rounded-xl flex items-center justify-center text-sm font-semibold shadow-sm ".concat(i?"bg-gradient-to-br from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400"),animate:{scale:t===a?1.1:1,boxShadow:i?"0 10px 25px -3px rgba(59, 130, 246, 0.25), 0 4px 6px -2px rgba(59, 130, 246, 0.05)":"none"},transition:{duration:.3},children:t+1}),(0,r.jsx)("span",{className:"text-xs mt-2 font-medium ".concat(i?"text-blue-600 dark:text-blue-400":"text-gray-400"),children:e}),t<3&&(0,r.jsx)("div",{className:"absolute top-5 left-12 w-8 h-0.5 ".concat(t<a?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"," transition-colors duration-300")})]},e)})}),(0,r.jsxs)(s.M_,{mode:"wait",children:["details"===b&&(0,r.jsxs)(s.EA.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:k,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-6 text-center border border-blue-200/50 dark:border-blue-800/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mr-3",children:(0,r.jsx)(n.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("span",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:j.amount.toFixed(2)})]}),a&&(0,r.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:["To: ",a]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Description (Optional)"}),(0,r.jsx)("input",{type:"text",className:"form-input",placeholder:"What's this payment for?",value:j.description,onChange:e=>N(t=>({...t,description:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Payment Method"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(s.EA.div,{className:"border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 ".concat("face"===y?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg shadow-blue-500/10 dark:from-blue-900/20 dark:to-indigo-900/20 dark:border-blue-400":"border-gray-200 bg-white/50 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50 dark:hover:bg-gray-700/50"),onClick:()=>w("face"),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mr-4 ".concat("face"===y?"bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg":"bg-gray-100 dark:bg-gray-700"),children:(0,r.jsx)(c.Z,{className:"w-6 h-6 ".concat("face"===y?"text-white":"text-gray-600 dark:text-gray-400")})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Biometric Verification"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Secure face recognition • Instant"})]}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border-2 transition-all ".concat("face"===y?"border-blue-500 bg-blue-500 shadow-sm":"border-gray-300 dark:border-gray-600"),children:"face"===y&&(0,r.jsx)(s.EA.div,{className:"w-2 h-2 bg-white rounded-full mx-auto mt-1",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})})})]})}),(0,r.jsx)(s.EA.div,{className:"border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 ".concat("card"===y?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg shadow-blue-500/10 dark:from-blue-900/20 dark:to-indigo-900/20 dark:border-blue-400":"border-gray-200 bg-white/50 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50 dark:hover:bg-gray-700/50"),onClick:()=>w("card"),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mr-4 ".concat("card"===y?"bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg":"bg-gray-100 dark:bg-gray-700"),children:(0,r.jsx)(o.Z,{className:"w-6 h-6 ".concat("card"===y?"text-white":"text-gray-600 dark:text-gray-400")})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Credit Card"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Traditional payment • Secure"})]}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border-2 transition-all ".concat("card"===y?"border-blue-500 bg-blue-500 shadow-sm":"border-gray-300 dark:border-gray-600"),children:"card"===y&&(0,r.jsx)(s.EA.div,{className:"w-2 h-2 bg-white rounded-full mx-auto mt-1",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})})})]})})]})]}),(0,r.jsxs)(d.z,{type:"submit",variant:"payment",size:"lg",className:"w-full mt-6",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]}),g&&(0,r.jsx)(d.z,{type:"button",onClick:g,variant:"outline",className:"w-full mt-3",children:"Cancel Payment"})]},"details"),"verification"===b&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Biometric Verification"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Look at the camera and stay still"})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(u.Z,{isScanning:f,onScanComplete:()=>{v(!1),p("processing"),setTimeout(()=>{p("complete");let e={amount:j.amount,method:"biometric",timestamp:new Date,recipient:a};null==x||x(e),null==h||h(e)},2e3)},size:"lg"})}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-yellow-600 mr-2"}),(0,r.jsx)("p",{className:"text-sm text-yellow-800",children:"Your biometric data is processed securely and never stored"})]})}),g&&(0,r.jsx)(d.z,{onClick:()=>{v(!1),g()},variant:"outline",className:"w-full text-gray-600 hover:text-gray-800",children:"Cancel Verification"})]},"verification"),"processing"===b&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(s.EA.div,{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Processing Payment"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Securing your transaction..."})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-blue-800",children:"Amount:"}),(0,r.jsxs)("span",{className:"font-semibold text-blue-900",children:["$",j.amount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[(0,r.jsx)("span",{className:"text-blue-800",children:"Method:"}),(0,r.jsx)("span",{className:"font-semibold text-blue-900",children:"Biometric"})]}),a&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[(0,r.jsx)("span",{className:"text-blue-800",children:"Recipient:"}),(0,r.jsx)("span",{className:"font-semibold text-blue-900",children:a})]})]})]},"processing"),"complete"===b&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,r.jsx)(s.EA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(s.EA.svg,{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.3},children:(0,r.jsx)(s.EA.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-green-700 mb-2",children:"Payment Successful!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Your transaction has been completed securely"})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,r.jsx)("span",{className:"text-green-800",children:"Amount Paid:"}),(0,r.jsxs)("span",{className:"font-bold text-green-900",children:["$",j.amount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,r.jsx)("span",{className:"text-green-800",children:"Transaction ID:"}),(0,r.jsxs)("span",{className:"font-mono text-xs text-green-900",children:["TXN",Date.now()]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-green-800",children:"Timestamp:"}),(0,r.jsx)("span",{className:"text-green-900",children:new Date().toLocaleTimeString()})]})]}),(0,r.jsx)(d.z,{onClick:()=>p("details"),variant:"outline",className:"w-full",children:"New Payment"})]},"complete")]})]})}},61189:function(e,t,a){a.d(t,{Z:function(){return g}});var r=a(57437),i=a(2265),s=a(48506),o=a(76780),n=a(80233),l=a(92940),c=a(74453),d=a(36141),u=a(52022),m=a(50362),h=a(882);function g(e){let{onRegistrationComplete:t}=e,[a,g]=(0,i.useState)("personal"),[x,b]=(0,i.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[p,f]=(0,i.useState)(!1),[v,y]=(0,i.useState)({}),[w,j]=(0,i.useState)(!1),N=[{key:"personal",title:"Personal Info",icon:u.Z},{key:"security",title:"Security",icon:c.Z},{key:"biometric",title:"Biometric",icon:n.Z},{key:"complete",title:"Complete",icon:l.Z}],k=()=>{let e={};return x.firstName.trim()||(e.firstName="First name is required"),x.lastName.trim()||(e.lastName="Last name is required"),x.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)||(e.email="Invalid email format"):e.email="Email is required",x.phone.trim()||(e.phone="Phone number is required"),y(e),0===Object.keys(e).length},A=()=>{let e={};return x.password?x.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",x.password!==x.confirmPassword&&(e.confirmPassword="Passwords do not match"),y(e),0===Object.keys(e).length},S=()=>N.findIndex(e=>e.key===a);return(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Your Account"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Join FacePay for secure biometric payments"})]}),(0,r.jsx)("div",{className:"flex justify-between items-center",children:N.map((e,t)=>{let a=S(),i=t<=a,o=e.icon;return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(s.EA.div,{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(i?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"),animate:{scale:t===a?1.1:1,backgroundColor:i?"#3B82F6":"#E5E7EB"},transition:{duration:.3},children:(0,r.jsx)(o,{className:"w-5 h-5"})}),(0,r.jsx)("span",{className:"text-xs mt-1 ".concat(i?"text-blue-600":"text-gray-400"),children:e.title})]},e.key)})}),(0,r.jsxs)(s.M_,{mode:"wait",children:["personal"===a&&(0,r.jsxs)(s.EA.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:e=>{e.preventDefault(),k()&&g("security")},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.firstName?"border-red-500":"border-gray-300"),value:x.firstName,onChange:e=>b(t=>({...t,firstName:e.target.value}))}),v.firstName&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.firstName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.lastName?"border-red-500":"border-gray-300"),value:x.lastName,onChange:e=>b(t=>({...t,lastName:e.target.value}))}),v.lastName&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.lastName})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,r.jsx)("input",{type:"email",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.email?"border-red-500":"border-gray-300"),value:x.email,onChange:e=>b(t=>({...t,email:e.target.value}))}),v.email&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.phone?"border-red-500":"border-gray-300"),value:x.phone,onChange:e=>b(t=>({...t,phone:e.target.value}))}),v.phone&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.phone})]}),(0,r.jsxs)(m.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Continue"]})]},"personal"),"security"===a&&(0,r.jsxs)(s.EA.form,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onSubmit:e=>{e.preventDefault(),A()&&g("biometric")},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.password?"border-red-500":"border-gray-300"),value:x.password,onChange:e=>b(t=>({...t,password:e.target.value}))}),v.password&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.password}),(0,r.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center text-xs ".concat(x.password.length>=8?"text-green-600":"text-gray-400"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(x.password.length>=8?"bg-green-500":"bg-gray-300")}),"At least 8 characters"]}),(0,r.jsxs)("div",{className:"flex items-center text-xs ".concat(/[A-Z]/.test(x.password)?"text-green-600":"text-gray-400"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(/[A-Z]/.test(x.password)?"bg-green-500":"bg-gray-300")}),"Uppercase letter"]}),(0,r.jsxs)("div",{className:"flex items-center text-xs ".concat(/[0-9]/.test(x.password)?"text-green-600":"text-gray-400"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(/[0-9]/.test(x.password)?"bg-green-500":"bg-gray-300")}),"Number"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.confirmPassword?"border-red-500":"border-gray-300"),value:x.confirmPassword,onChange:e=>b(t=>({...t,confirmPassword:e.target.value}))}),v.confirmPassword&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.confirmPassword})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-blue-900 mb-1",children:"Security Notice"}),(0,r.jsx)("p",{className:"text-blue-800",children:"Your password is encrypted and never stored in plain text. We recommend using a strong, unique password."})]})]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(m.z,{type:"button",variant:"outline",onClick:()=>g("personal"),className:"flex-1",children:"Back"}),(0,r.jsxs)(m.z,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Continue"]})]})]},"security"),"biometric"===a&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Biometric Enrollment"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Set up face recognition for secure, passwordless payments"})]}),w?(0,r.jsxs)(s.EA.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(l.Z,{className:"w-8 h-8 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-green-700",children:"Biometric Enrolled Successfully!"}),(0,r.jsx)("p",{className:"text-sm text-green-600",children:"Your face has been registered securely"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(h.Z,{isScanning:p,onScanComplete:()=>{f(!1),j(!0),setTimeout(()=>{g("complete"),null==t||t({...x,biometricEnabled:!0,registrationDate:new Date})},1500)},size:"lg"})}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-yellow-900 mb-1",children:"Privacy & Security"}),(0,r.jsxs)("ul",{className:"text-yellow-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Your biometric data is processed locally"}),(0,r.jsx)("li",{children:"• Face templates are encrypted and never shared"}),(0,r.jsx)("li",{children:"• You can disable this feature anytime"})]})]})]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(m.z,{variant:"outline",onClick:()=>g("security"),className:"flex-1",children:"Back"}),(0,r.jsxs)(m.z,{onClick:()=>{f(!0)},disabled:p,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),p?"Scanning...":"Enroll Face"]})]})]})]},"biometric"),"complete"===a&&(0,r.jsxs)(s.EA.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center space-y-6",children:[(0,r.jsx)(s.EA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(l.Z,{className:"w-10 h-10 text-green-600"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-green-700 mb-2",children:"Welcome to FacePay!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Your account has been created successfully"})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[(0,r.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Account Summary"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-green-700",children:"Name:"}),(0,r.jsxs)("span",{className:"text-green-900",children:[x.firstName," ",x.lastName]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-green-700",children:"Email:"}),(0,r.jsx)("span",{className:"text-green-900",children:x.email})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-green-700",children:"Biometric:"}),(0,r.jsx)("span",{className:"text-green-900",children:"✓ Enabled"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(m.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"Start Using FacePay"}),(0,r.jsx)(m.z,{variant:"outline",className:"w-full",children:"Account Settings"})]})]},"complete")]})]})}},79055:function(e,t,a){a.d(t,{C:function(){return n}});var r=a(57437);a(2265);var i=a(13027),s=a(49354);let o=(0,i.j)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-sm",secondary:"border-transparent bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",success:"border-transparent bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-sm",destructive:"border-transparent bg-gradient-to-r from-red-600 to-pink-600 text-white shadow-sm",warning:"border-transparent bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-sm",info:"border-transparent bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-sm",outline:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:bg-transparent dark:hover:bg-gray-800",active:"border-transparent bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",inactive:"border-transparent bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",pending:"border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",verified:"border-transparent bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",premium:"border-transparent bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md",paid:"border-transparent bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",unpaid:"border-transparent bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",processing:"border-transparent bg-blue-100 text-blue-800 animate-pulse dark:bg-blue-900/30 dark:text-blue-300"},size:{sm:"px-2 py-0.5 text-xs",default:"px-3 py-1 text-xs",lg:"px-4 py-1.5 text-sm"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:t,variant:a,size:i,icon:n,children:l,...c}=e;return(0,r.jsxs)("div",{className:(0,s.cn)(o({variant:a,size:i}),t),...c,children:[n&&(0,r.jsx)("span",{className:"mr-1",children:n}),l]})}},50362:function(e,t,a){a.d(t,{z:function(){return d}});var r=a(57437),i=a(2265),s=a(92974),o=a(13027),n=a(3274),l=a(49354);let c=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap font-semibold text-sm transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-target mobile-tap-highlight",{variants:{variant:{default:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg shadow-lg hover:from-blue-700 hover:to-purple-700 hover:shadow-xl hover:scale-105",success:"bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg shadow-lg hover:from-green-700 hover:to-emerald-700 hover:shadow-xl hover:scale-105",destructive:"bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg shadow-lg hover:from-red-700 hover:to-pink-700 hover:shadow-xl hover:scale-105",outline:"border-2 border-gray-200 bg-white/50 backdrop-blur-sm text-foreground rounded-lg shadow-sm hover:bg-white hover:border-blue-500 hover:shadow-md dark:border-gray-700 dark:bg-gray-800/50 dark:hover:bg-gray-800",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-foreground rounded-lg shadow-lg hover:bg-white/20 hover:border-white/30 hover:shadow-xl hover:scale-105",ghost:"text-foreground rounded-lg hover:bg-accent hover:text-accent-foreground",link:"text-blue-600 underline-offset-4 hover:underline dark:text-blue-400",biometric:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-full shadow-lg hover:shadow-glow hover:scale-105 biometric-scan-mobile",payment:"bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl shadow-xl hover:shadow-glow-green hover:scale-105 payment-flow-glow",glass:"card-glass text-foreground rounded-xl hover:shadow-strong hover:scale-105",warning:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg shadow-lg hover:from-yellow-600 hover:to-orange-600 hover:shadow-xl hover:scale-105"},size:{sm:"h-9 px-3 text-sm rounded-md",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-8 py-3 text-base rounded-lg",xl:"h-14 px-10 py-4 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-sm":"h-8 w-8 rounded-md","icon-lg":"h-12 w-12 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:a,variant:i,size:o,asChild:d=!1,loading:u=!1,leftIcon:m,rightIcon:h,children:g,disabled:x,...b}=e,p=d?s.g7:"button";return(0,r.jsxs)(p,{className:(0,l.cn)(c({variant:i,size:o,className:a})),ref:t,disabled:x||u,...b,children:[u&&(0,r.jsx)(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),!u&&m&&(0,r.jsx)("span",{className:"mr-2",children:m}),g,!u&&h&&(0,r.jsx)("span",{className:"ml-2",children:h})]})});d.displayName="Button"},48185:function(e,t,a){a.d(t,{Ol:function(){return c},SZ:function(){return u},Zb:function(){return l},aY:function(){return m},ll:function(){return d}});var r=a(57437),i=a(2265),s=a(13027),o=a(49354);let n=(0,s.j)("rounded-xl border bg-card text-card-foreground shadow-sm transition-all duration-300",{variants:{variant:{default:"bg-white/80 backdrop-blur-xl border-white/20 shadow-xl dark:bg-gray-900/80 dark:border-gray-700/30",glass:"bg-white/10 backdrop-blur-2xl border-white/20 shadow-2xl dark:bg-gray-900/10 dark:border-gray-700/30",elevated:"bg-white border-gray-200 shadow-strong hover:shadow-xl dark:bg-gray-900 dark:border-gray-700",interactive:"bg-white/80 backdrop-blur-xl border-white/20 shadow-xl hover:shadow-2xl hover:scale-[1.02] cursor-pointer dark:bg-gray-900/80 dark:border-gray-700/30",payment:"bg-gradient-to-br from-white via-white to-gray-50 border-gray-200 shadow-xl hover:shadow-2xl dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 dark:border-gray-700",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 shadow-lg dark:from-green-900/20 dark:to-emerald-900/20 dark:border-green-800/50",error:"bg-gradient-to-br from-red-50 to-pink-50 border-red-200 shadow-lg dark:from-red-900/20 dark:to-pink-900/20 dark:border-red-800/50",warning:"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200 shadow-lg dark:from-yellow-900/20 dark:to-orange-900/20 dark:border-yellow-800/50"},size:{sm:"p-4 rounded-lg",default:"p-6 rounded-xl",lg:"p-8 rounded-2xl"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,t)=>{let{className:a,variant:i,size:s,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)(n({variant:i,size:s}),a),...l})});l.displayName="Card";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-2 p-6 pb-4",a),...i})});c.displayName="CardHeader";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("text-xl font-bold leading-tight tracking-tight text-foreground",a),...i})});d.displayName="CardTitle";let u=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground leading-relaxed",a),...i})});u.displayName="CardDescription";let m=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("px-6 pb-6 pt-2",a),...i})});m.displayName="CardContent",i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center justify-between px-6 py-4 bg-gray-50/50 rounded-b-xl dark:bg-gray-800/50",a),...i})}).displayName="CardFooter"},90896:function(e,t,a){a.d(t,{p:function(){return m}});var r=a(2265),i=a(49354);let s=[],o=new Set,n=()=>{o.forEach(e=>e(s))},l=e=>{let t=(0,i.Le)(),a={id:t,timestamp:Date.now(),duration:5e3,...e};return s=[a,...s].slice(0,5),n(),!a.persistent&&a.duration&&a.duration>0&&setTimeout(()=>{c(t)},a.duration),t},c=e=>{s=s.filter(t=>t.id!==e),n()},d=(e,t)=>{s=s.map(a=>a.id===e?{...a,...t}:a),n()},u=()=>{s=[],n()};function m(){let[e,t]=(0,r.useState)(s),a=(0,r.useRef)();r.useEffect(()=>(a.current=t,o.add(a.current),()=>{a.current&&o.delete(a.current)}),[]);let i=(0,r.useCallback)(e=>l(e),[]),n=(0,r.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({title:e,description:t,variant:"success",...a})},[]),m=(0,r.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({title:e,description:t,variant:"error",duration:8e3,...a})},[]),h=(0,r.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({title:e,description:t,variant:"warning",duration:6e3,...a})},[]),g=(0,r.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({title:e,description:t,variant:"info",...a})},[]),x=(0,r.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l({title:e,description:t,variant:"loading",persistent:!0,...a})},[]);return{toasts:e,toast:i,success:n,error:m,warning:h,info:g,loading:x,dismiss:(0,r.useCallback)(e=>{c(e)},[]),dismissAll:(0,r.useCallback)(()=>{u()},[]),update:(0,r.useCallback)((e,t)=>{d(e,t)},[])}}},49354:function(e,t,a){a.d(t,{Le:function(){return o},cn:function(){return s}});var r=a(44839),i=a(96164);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.m6)((0,r.W)(t))}function o(){return crypto.randomUUID()}},45900:function(e,t,a){a.d(t,{G:function(){return s}});var r=a(21424),i=a(74550);class s{static async checkBrowserCapabilities(){console.log("[WebAuthn Service] Starting browser capabilities check..."),console.log("[WebAuthn Service] WebAuthn supported:","credentials"in navigator),console.log("[WebAuthn Service] PublicKeyCredential:",!!window.PublicKeyCredential),console.log("[WebAuthn Service] User Agent:",navigator.userAgent),console.log("[WebAuthn Service] Platform:",navigator.platform),console.log("[WebAuthn Service] Location:",window.location.href),console.log("[WebAuthn Service] Is HTTPS:","https:"===window.location.protocol),console.log("[WebAuthn Service] Is localhost:","localhost"===window.location.hostname),console.log("[WebAuthn Service] Hostname:",window.location.hostname),console.log("[WebAuthn Service] Port:",window.location.port),console.log("[WebAuthn Service] rpID will be:","localhost"===window.location.hostname?"localhost":window.location.hostname);let e=!1,t=!1,a=[];if(!navigator)return{isSupported:!1,isPlatformAuthenticatorAvailable:!1,biometricTypes:[],biometricAvailability:{faceID:!1,touchID:!1,windowsHello:!1,androidFingerprint:!1,androidFace:!1},deviceInfo:{platform:"server",isMobile:!1,isIOS:!1,isAndroid:!1,isMacOS:!1,isWindows:!1}};let i=navigator.userAgent.toLowerCase(),s=/iphone|ipad|ipod/.test(i),o=/android/.test(i),n=/macintosh|mac os x/.test(i)&&!s,l=/windows|win32|win64/.test(i),c=/mobile|android|iphone|ipad|phone|blackberry|opera mini|iemobile|wpdesktop/.test(i);try{if(window.PublicKeyCredential&&window.navigator.credentials){if(e=!0,console.log("[WebAuthn Service] WebAuthn APIs available, checking platform authenticator..."),t=await (0,r.Fb)(PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable(),r.LS.QUICK_OPERATION,"Platform authenticator check timed out","platform-authenticator-check"),console.log("[WebAuthn Service] Platform authenticator available:",t),PublicKeyCredential.isConditionalMediationAvailable)try{let e=await PublicKeyCredential.isConditionalMediationAvailable();console.log("[WebAuthn Service] Conditional UI available:",e)}catch(e){console.log("[WebAuthn Service] Conditional UI check failed:",e)}else console.log("[WebAuthn Service] Conditional UI not supported");t?(console.log("[WebAuthn Service] Inferring biometric types for device..."),s?(a=["face","fingerprint"],console.log("[WebAuthn Service] iOS device - Face ID and Touch ID available")):o?(a=["fingerprint","face"],console.log("[WebAuthn Service] Android device - Fingerprint and Face available")):n?(a=["fingerprint"],console.log("[WebAuthn Service] macOS device - Touch ID available")):l?(a=["fingerprint","face"],console.log("[WebAuthn Service] Windows device - Windows Hello available")):(a=["unknown"],console.log("[WebAuthn Service] Unknown device type - generic biometric available"))):console.log("[WebAuthn Service] No platform authenticator available")}}catch(e){(0,r.q4)(e)?console.warn("[WebAuthn Service] Capabilities check timed out, assuming not available"):console.error("[WebAuthn Service] Error checking WebAuthn capabilities:",{name:e instanceof Error?e.name:"Unknown",message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0})}return console.log("[WebAuthn Service] Final capabilities result:",{isSupported:e,isPlatformAuthenticatorAvailable:t,biometricTypes:a,biometricAvailability:{faceID:s&&a.includes("face"),touchID:(s||n)&&a.includes("fingerprint"),windowsHello:l&&t,androidFingerprint:o&&a.includes("fingerprint"),androidFace:o&&a.includes("face")},deviceInfo:{platform:navigator.platform,isMobile:c,isIOS:s,isAndroid:o,isMacOS:n,isWindows:l}}),{isSupported:e,isPlatformAuthenticatorAvailable:t,biometricTypes:a,biometricAvailability:{faceID:s&&a.includes("face"),touchID:(s||n)&&a.includes("fingerprint"),windowsHello:l&&t,androidFingerprint:o&&a.includes("fingerprint"),androidFace:o&&a.includes("face")},deviceInfo:{platform:navigator.platform,isMobile:c,isIOS:s,isAndroid:o,isMacOS:n,isWindows:l}}}static handleWebAuthnError(e){var t,a;let i=(null==e?void 0:e.name)||(null==e?void 0:e.code)||"UnknownError",s=(null==e?void 0:e.message)||"";switch(console.error("[WebAuthn Service] DETAILED ERROR ANALYSIS:",{errorName:i,errorMessage:s,errorStack:null==e?void 0:e.stack,errorType:typeof e,isWebAuthnError:(null==e?void 0:null===(t=e.name)||void 0===t?void 0:t.includes("WebAuthn"))||(null==e?void 0:null===(a=e.name)||void 0===a?void 0:a.includes("Credential")),timestamp:new Date().toISOString(),userAgent:"undefined"!=typeof navigator?navigator.userAgent:"N/A",origin:window.location.origin,protocol:window.location.protocol,fullError:e}),"NotAllowedError"===i?console.warn("[WebAuthn Service] USER CANCELLED OR DENIED biometric prompt - This is expected if user cancels Face ID/Touch ID"):"NotSupportedError"===i?console.error("[WebAuthn Service] WEBAUTHN NOT SUPPORTED - Device or browser lacks biometric capabilities"):"SecurityError"===i?console.error("[WebAuthn Service] SECURITY ERROR - Likely HTTPS issue or invalid RP configuration"):"TimeoutError"===i?console.warn("[WebAuthn Service] TIMEOUT - User took too long or biometric sensor unresponsive"):(null==s?void 0:s.includes("credentials.create"))?console.error("[WebAuthn Service] CREDENTIAL CREATION ERROR - Registration failed"):(null==s?void 0:s.includes("credentials.get"))&&console.error("[WebAuthn Service] CREDENTIAL GET ERROR - Authentication failed"),i){case"TimeoutError":return{code:"TIMEOUT",message:"Biometric authentication timed out.",isRecoverable:!0,suggestedAction:"The operation took too long. Please try again or use an alternative method.",details:"Timeout after ".concat(r.LS.WEBAUTHN_OPERATION,"ms")};case"NotSupportedError":return{code:"NOT_SUPPORTED",message:"Your browser or device doesn't support biometric authentication.",isRecoverable:!1,suggestedAction:"Please try using a different browser or device, or use traditional password login.",details:"WebAuthn or platform authenticator not supported"};case"NotAllowedError":return{code:"USER_CANCELLED",message:"Biometric authentication was cancelled or denied.",isRecoverable:!0,suggestedAction:"Please try again and follow the biometric prompt on your device.",details:"User cancelled Face ID/Touch ID prompt or permission denied"};case"SecurityError":return{code:"SECURITY_ERROR",message:"Security requirements not met for biometric authentication.",isRecoverable:!1,suggestedAction:"Please ensure you're using a secure connection (HTTPS) and try again.",details:"HTTPS required or invalid relying party configuration"};case"InvalidStateError":return{code:"INVALID_STATE",message:"Credential already exists or invalid authenticator state.",isRecoverable:!0,suggestedAction:"This credential may already be registered. Try authenticating instead.",details:"Credential already exists or authenticator in invalid state"};case"UnknownError":return{code:"UNKNOWN",message:"An unexpected error occurred during biometric authentication.",isRecoverable:!0,suggestedAction:"Please try again or contact support if the problem persists.",details:s||"Unknown WebAuthn error"};default:if((null==s?void 0:s.includes("Failed to fetch"))||(null==s?void 0:s.includes("NetworkError")))return{code:"NETWORK_ERROR",message:"Network error while communicating with authentication server.",isRecoverable:!0,suggestedAction:"Check your internet connection and try again.",details:"Network connectivity issue"};if((null==s?void 0:s.includes("400"))||(null==s?void 0:s.includes("Bad Request")))return{code:"BAD_REQUEST",message:"Invalid authentication request.",isRecoverable:!1,suggestedAction:"Please refresh the page and try again.",details:"Invalid request format or parameters"};if((null==s?void 0:s.includes("401"))||(null==s?void 0:s.includes("Unauthorized")))return{code:"UNAUTHORIZED",message:"Authentication failed - credential not verified.",isRecoverable:!0,suggestedAction:"Please try registering your biometric data again.",details:"Backend authentication verification failed"};return{code:"UNKNOWN",message:s||"An unexpected error occurred during biometric authentication.",isRecoverable:!0,suggestedAction:"Please try again or contact support if the problem persists.",details:"Unhandled error: ".concat(i)}}}static async register(e,t){console.log("[WebAuthn Service] Starting REAL biometric registration:",{userId:e.userId,userName:e.userName,userDisplayName:e.userDisplayName,hasAbortSignal:!!t,timestamp:new Date().toISOString(),origin:window.location.origin,userAgent:navigator.userAgent}),this.logWebAuthnConfiguration();let a=await this.checkBrowserCapabilities();if(console.log("[WebAuthn Service] Registration capabilities check:",a),!a.isSupported||!a.isPlatformAuthenticatorAvailable)throw console.error("[WebAuthn Service] Registration failed - capabilities check:",{isSupported:a.isSupported,isPlatformAuthenticatorAvailable:a.isPlatformAuthenticatorAvailable,biometricTypes:a.biometricTypes,deviceInfo:a.deviceInfo}),Error("Biometric authentication is not available on this device");try{var s,o,n,l,c,d,u,m,h,g,x,b,p,f,v,y,w,j,N,k,A,S,E,C,I,T,W,R,P,D,F,B,O;let t=e.userId.includes("demo-real-"),a=t?"/api/webauthn/demo-register/start":"/api/webauthn/register/start";console.log("[WebAuthn Service] Using ".concat(t?"DEMO":"REGULAR"," registration endpoint:"),a),console.log("[WebAuthn Service] Step 1: Requesting REAL biometric registration options from backend...");let Z={userId:e.userId,userName:e.userName,userDisplayName:e.userDisplayName};console.log("[WebAuthn Service] Registration request body:",Z);let L=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z),credentials:"include"});if(console.log("[WebAuthn Service] Registration options response status:",L.status),!L.ok){let e=await L.text();console.error("[WebAuthn Service] Failed to get registration options:",{status:L.status,statusText:L.statusText,error:e});let t="Failed to get registration options";try{t=JSON.parse(e).message||t}catch(a){t=e||t}throw Error(t)}let U=await L.json();if(console.log("[WebAuthn Service] Registration options response data:",U),!U.success||!(null===(s=U.data)||void 0===s?void 0:s.options))throw console.error("[WebAuthn Service] Invalid registration options response format:",U),Error("Invalid registration options response format");let M=U.data.options;console.log("[WebAuthn Service] Got registration options from backend:",{rpId:null===(o=M.rp)||void 0===o?void 0:o.id,rpName:null===(n=M.rp)||void 0===n?void 0:n.name,userName:null===(l=M.user)||void 0===l?void 0:l.name,userDisplayName:null===(c=M.user)||void 0===c?void 0:c.displayName,userVerification:null===(d=M.authenticatorSelection)||void 0===d?void 0:d.userVerification,authenticatorAttachment:null===(u=M.authenticatorSelection)||void 0===u?void 0:u.authenticatorAttachment,residentKey:null===(m=M.authenticatorSelection)||void 0===m?void 0:m.residentKey,attestation:M.attestation,timeout:M.timeout,challengeLength:null===(h=M.challenge)||void 0===h?void 0:h.length,algorithms:null===(g=M.pubKeyCredParams)||void 0===g?void 0:g.map(e=>e.alg),excludeCredentials:(null===(x=M.excludeCredentials)||void 0===x?void 0:x.length)||0}),console.log("[WebAuthn Service] Step 2: Starting real biometric registration..."),console.log("[WebAuthn Service] About to call startRegistration() - BIOMETRIC PROMPT WILL APPEAR"),console.log("[WebAuthn Service] Registration options being passed to startRegistration:",JSON.stringify(M,null,2));let z=await (0,r.Fb)((0,i.RQ)(M),r.LS.WEBAUTHN_OPERATION,"Biometric registration timed out. Please try again.","webauthn-registration");console.log("[WebAuthn Service] startRegistration() completed successfully!"),console.log("[WebAuthn Service] Real biometric registration completed:",{credentialId:z.id,type:z.type,rawIdLength:null===(b=z.rawId)||void 0===b?void 0:b.length,responseType:(null===(f=z.response)||void 0===f?void 0:null===(p=f.constructor)||void 0===p?void 0:p.name)||"unknown",attestationObjectLength:null===(y=z.response)||void 0===y?void 0:null===(v=y.attestationObject)||void 0===v?void 0:v.length,clientDataJSONLength:null===(j=z.response)||void 0===j?void 0:null===(w=j.clientDataJSON)||void 0===w?void 0:w.length,transports:null===(N=z.response)||void 0===N?void 0:N.transports,authenticatorDataLength:null===(A=z.response)||void 0===A?void 0:null===(k=A.authenticatorData)||void 0===k?void 0:k.length,timestamp:new Date().toISOString()}),console.log("[WebAuthn Service] Step 3: Sending credential to backend for verification...");let H=t?"/api/webauthn/demo-register/complete":"/api/webauthn/register/complete";console.log("[WebAuthn Service] Using ".concat(t?"DEMO":"REGULAR"," completion endpoint:"),H);let V=t?{credential:z,userId:e.userId}:{credential:z};console.log("[WebAuthn Service] Verification request body structure:",{hasCredential:!!V.credential,credentialId:null===(S=V.credential)||void 0===S?void 0:S.id,credentialType:null===(E=V.credential)||void 0===E?void 0:E.type,userId:t?e.userId:"not included for authenticated users"});let _=await fetch(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V),credentials:"include"});if(console.log("[WebAuthn Service] Verification response status:",_.status),!_.ok){let e=await _.text();console.error("[WebAuthn Service] Registration verification failed:",{status:_.status,statusText:_.statusText,error:e});let t="Failed to verify registration";try{t=JSON.parse(e).message||t}catch(a){t=e||t}throw Error(t)}let q=await _.json();if(console.log("[WebAuthn Service] Registration verification response:",q),console.log("[WebAuthn Service] Registration verification completed:",{success:q.success,verified:null===(C=q.data)||void 0===C?void 0:C.verified,biometricVerified:null===(I=q.data)||void 0===I?void 0:I.biometricVerified,authenticatorType:null===(T=q.data)||void 0===T?void 0:T.authenticatorType,biometricUsed:null===(W=q.data)||void 0===W?void 0:W.biometricUsed,deviceType:null===(P=q.data)||void 0===P?void 0:null===(R=P.credential)||void 0===R?void 0:R.deviceType,backedUp:null===(F=q.data)||void 0===F?void 0:null===(D=F.credential)||void 0===D?void 0:D.backedUp}),!q.success||!(null===(B=q.data)||void 0===B?void 0:B.verified)){let e=q.message||"Registration verification failed";throw console.error("[WebAuthn Service] Verification unsuccessful:",{success:q.success,verified:null===(O=q.data)||void 0===O?void 0:O.verified,message:q.message}),Error(e)}return z}catch(t){console.error("[WebAuthn Service] Real registration error details:",{name:null==t?void 0:t.name,message:null==t?void 0:t.message,code:null==t?void 0:t.code,stack:null==t?void 0:t.stack,isTimeoutError:(0,r.q4)(t),type:typeof t,stringified:String(t)});let e=this.handleWebAuthnError(t);throw console.error("[WebAuthn Service] Processed registration error:",e),Error(e.message)}}static async authenticate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;console.log("[WebAuthn Service] Starting REAL biometric authentication:",{email:e.email,userId:e.userId,hasAbortSignal:!!t,timestamp:new Date().toISOString(),origin:window.location.origin,userAgent:navigator.userAgent}),this.logWebAuthnConfiguration();let a=await this.checkBrowserCapabilities();if(console.log("[WebAuthn Service] Authentication capabilities check:",a),!a.isSupported||!a.isPlatformAuthenticatorAvailable)throw console.error("[WebAuthn Service] Authentication failed - capabilities check:",{isSupported:a.isSupported,isPlatformAuthenticatorAvailable:a.isPlatformAuthenticatorAvailable,biometricTypes:a.biometricTypes,deviceInfo:a.deviceInfo}),Error("Biometric authentication is not available on this device");try{var s,o,n,l,c,d,u,m,h,g,x,b,p,f,v,y,w,j,N,k,A,S,E,C,I,T;console.log("[WebAuthn Service] Step 1: Requesting authentication options from backend...");let t={email:e.email,userId:e.userId};console.log("[WebAuthn Service] Authentication request body:",t);let a=await fetch("/api/webauthn/authenticate/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(console.log("[WebAuthn Service] Authentication options response status:",a.status),!a.ok){let e=await a.text();console.error("[WebAuthn Service] Failed to get authentication options:",{status:a.status,statusText:a.statusText,error:e});let t="Failed to get authentication options";try{t=JSON.parse(e).message||t}catch(a){t=e||t}throw Error(t)}let W=await a.json();if(console.log("[WebAuthn Service] Authentication options response data:",W),!W.success||!(null===(s=W.data)||void 0===s?void 0:s.options))throw console.error("[WebAuthn Service] Invalid authentication options response format:",W),Error("Invalid authentication options response format");let R=W.data.options;console.log("[WebAuthn Service] Got authentication options from backend:",{rpId:R.rpId,userVerification:R.userVerification,timeout:R.timeout,challengeLength:null===(o=R.challenge)||void 0===o?void 0:o.length,allowCredentialsCount:(null===(n=R.allowCredentials)||void 0===n?void 0:n.length)||0,biometricRequired:W.data.biometricRequired}),console.log("[WebAuthn Service] Step 2: Starting real biometric authentication..."),console.log("[WebAuthn Service] About to call startAuthentication() - BIOMETRIC PROMPT WILL APPEAR"),console.log("[WebAuthn Service] Authentication options being passed to startAuthentication:",JSON.stringify(R,null,2));let P=await (0,r.Fb)((0,i.oz)(R),r.LS.WEBAUTHN_OPERATION,"Biometric authentication timed out. Please try again.","webauthn-authentication");console.log("[WebAuthn Service] startAuthentication() completed successfully!"),console.log("[WebAuthn Service] Real biometric authentication completed:",{credentialId:P.id,type:P.type,rawIdLength:null===(l=P.rawId)||void 0===l?void 0:l.length,responseType:(null===(d=P.response)||void 0===d?void 0:null===(c=d.constructor)||void 0===c?void 0:c.name)||"unknown",authenticatorDataLength:null===(m=P.response)||void 0===m?void 0:null===(u=m.authenticatorData)||void 0===u?void 0:u.length,clientDataJSONLength:null===(g=P.response)||void 0===g?void 0:null===(h=g.clientDataJSON)||void 0===h?void 0:h.length,signatureLength:null===(b=P.response)||void 0===b?void 0:null===(x=b.signature)||void 0===x?void 0:x.length,userHandleLength:(null===(f=P.response)||void 0===f?void 0:null===(p=f.userHandle)||void 0===p?void 0:p.length)||0,timestamp:new Date().toISOString()}),console.log("[WebAuthn Service] Step 3: Sending credential to backend for verification...");let D={credential:P,email:e.email};console.log("[WebAuthn Service] Authentication verification request body structure:",{hasCredential:!!D.credential,credentialId:null===(v=D.credential)||void 0===v?void 0:v.id,credentialType:null===(y=D.credential)||void 0===y?void 0:y.type,email:D.email});let F=await fetch("/api/webauthn/authenticate/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D),credentials:"include"});if(console.log("[WebAuthn Service] Authentication verification response status:",F.status),!F.ok){let e=await F.text();console.error("[WebAuthn Service] Authentication verification failed:",{status:F.status,statusText:F.statusText,error:e});let t="Failed to verify authentication";try{t=JSON.parse(e).message||t}catch(a){t=e||t}throw Error(t)}let B=await F.json();if(console.log("[WebAuthn Service] Authentication verification response:",B),console.log("[WebAuthn Service] Authentication verification completed:",{success:B.success,verified:null===(w=B.data)||void 0===w?void 0:w.verified,biometricVerified:null===(j=B.data)||void 0===j?void 0:j.biometricVerified,authenticatorType:null===(N=B.data)||void 0===N?void 0:N.authenticatorType,biometricUsed:null===(k=B.data)||void 0===k?void 0:k.biometricUsed,userId:null===(S=B.data)||void 0===S?void 0:null===(A=S.user)||void 0===A?void 0:A.id,userName:null===(C=B.data)||void 0===C?void 0:null===(E=C.user)||void 0===E?void 0:E.name}),!B.success||!(null===(I=B.data)||void 0===I?void 0:I.verified)){let e=B.message||"Authentication verification failed";throw console.error("[WebAuthn Service] Authentication verification unsuccessful:",{success:B.success,verified:null===(T=B.data)||void 0===T?void 0:T.verified,message:B.message}),Error(e)}return{...P}}catch(t){console.error("[WebAuthn Service] Real authentication error details:",{name:null==t?void 0:t.name,message:null==t?void 0:t.message,code:null==t?void 0:t.code,stack:null==t?void 0:t.stack,isTimeoutError:(0,r.q4)(t),type:typeof t,stringified:String(t)});let e=this.handleWebAuthnError(t);throw console.error("[WebAuthn Service] Processed authentication error:",e),Error(e.message)}}static validateBiometricAuthentication(e,t){return e&&e.userVerified?{isValid:!0}:{isValid:!1,reason:"User verification not performed - biometric authentication required"}}static analyzeBiometricAuthentication(e,t){return{userVerified:(null==e?void 0:e.userVerified)||!1,userPresent:(null==e?void 0:e.userPresent)||!1,deviceType:(null==t?void 0:t.isMobile)?"mobile":"desktop",platformInfo:t||{}}}static logBiometricAuthenticationResult(e,t,a){console.log("[WebAuthn Service] Biometric authentication completed:",{userId:t,success:(null==a?void 0:a.verified)||!1,userVerified:(null==e?void 0:e.userVerified)||!1,deviceType:(null==e?void 0:e.deviceType)||"unknown",timestamp:new Date().toISOString()})}static getBiometricTypeName(e){return e.biometricTypes.includes("face")?e.deviceInfo.isIOS?"Face ID":"Face Recognition":e.biometricTypes.includes("fingerprint")?e.deviceInfo.isIOS?"Touch ID":e.deviceInfo.isWindows?"Windows Hello":"Fingerprint":e.deviceInfo.isWindows&&e.isPlatformAuthenticatorAvailable?"Windows Hello":"Biometric Authentication"}static getBiometricIcon(e){return e.biometricTypes.includes("face")?"\uD83D\uDC64":e.biometricTypes.includes("fingerprint")?"\uD83D\uDC46":e.deviceInfo.isMobile?"\uD83D\uDCF1":e.deviceInfo.isWindows?"\uD83D\uDD10":"\uD83D\uDEE1️"}static async getDebugInfo(){let e={timestamp:new Date().toISOString(),environment:{userAgent:"undefined"!=typeof navigator?navigator.userAgent:"N/A",language:"undefined"!=typeof navigator?navigator.language:"N/A",cookieEnabled:"undefined"!=typeof navigator&&navigator.cookieEnabled,onLine:"undefined"!=typeof navigator&&navigator.onLine,platform:"undefined"!=typeof navigator?navigator.platform:"N/A"},location:{origin:window.location.origin,protocol:window.location.protocol,hostname:window.location.hostname,port:window.location.port},webauthn:{isSupported:!!window.PublicKeyCredential,isUserVerifyingPlatformAuthenticatorAvailable:!1,isConditionalMediationAvailable:!1},capabilities:null,errors:[]};try{if(window.PublicKeyCredential){try{e.webauthn.isUserVerifyingPlatformAuthenticatorAvailable=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch(t){e.errors.push("Platform authenticator check failed: ".concat(t))}try{PublicKeyCredential.isConditionalMediationAvailable&&(e.webauthn.isConditionalMediationAvailable=await PublicKeyCredential.isConditionalMediationAvailable())}catch(t){e.errors.push("Conditional mediation check failed: ".concat(t))}}try{e.capabilities=await this.checkBrowserCapabilities()}catch(t){e.errors.push("Capabilities check failed: ".concat(t))}}catch(t){e.errors.push("General debug info collection failed: ".concat(t))}return console.log("[WebAuthn Service] COMPLETE DEBUG INFO:",e),e}static async testWebAuthnSupport(){console.log("[WebAuthn Service] TESTING WEBAUTHN SUPPORT...");let e=[],t=[],a=!0;window.PublicKeyCredential||(a=!1,e.push("WebAuthn API not available"),t.push("Use a modern browser that supports WebAuthn (Chrome 67+, Firefox 60+, Safari 14+)")),"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&(a=!1,e.push("HTTPS required for WebAuthn (except localhost)"),t.push("Use HTTPS in production or test on localhost"));try{window.PublicKeyCredential&&!await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()&&(a=!1,e.push("No platform authenticator available"),t.push("Enable Face ID/Touch ID on your device or use a device with biometric sensors"))}catch(a){e.push("Platform authenticator check failed: ".concat(a)),t.push("Check device biometric settings and browser permissions")}"undefined"==typeof navigator||navigator.onLine||(e.push("Device appears to be offline"),t.push("Check internet connection"));let r={supported:a,issues:e,recommendations:t};return console.log("[WebAuthn Service] WEBAUTHN SUPPORT TEST RESULTS:",r),r}static shouldAllowCrossPlatformFallback(e){return!e.isPlatformAuthenticatorAvailable}static getRegistrationOptionsWithFallback(e){return this.shouldAllowCrossPlatformFallback(e)?(console.log("[WebAuthn Service] Platform authenticator not available, allowing cross-platform fallback"),{authenticatorSelection:{requireResidentKey:!1,userVerification:"preferred"}}):{authenticatorSelection:{authenticatorAttachment:"platform",requireResidentKey:!1,userVerification:"preferred"}}}static logWebAuthnConfiguration(){console.log("[WebAuthn Service] CONFIGURATION DEBUG:",{hostname:window.location.hostname,protocol:window.location.protocol,port:window.location.port,origin:window.location.origin,rpIdWillBe:"localhost"===window.location.hostname?"localhost":window.location.hostname,isLocalhost:"localhost"===window.location.hostname,isHTTPS:"https:"===window.location.protocol,userAgent:"undefined"!=typeof navigator?navigator.userAgent:"N/A"})}}},21424:function(e,t,a){a.d(t,{Fb:function(){return i},LS:function(){return o},Oo:function(){return n},ld:function(){return c},q4:function(){return l}});class r extends Error{constructor(e,t,a){super(e),this.operation=t,this.timeout=a,this.name="TimeoutError",this.isTimeout=!0,Object.setPrototypeOf(this,r.prototype)}}function i(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"operation";return new Promise((s,o)=>{let n=setTimeout(()=>{o(new r(a,i,t))},t);e.then(e=>{clearTimeout(n),s(e)}).catch(e=>{clearTimeout(n),o(e)})})}class s{start(){this.cancelled||(this.timeoutId=setTimeout(()=>{this.cancelled||this.callback()},this.delay))}cancel(){this.cancelled=!0,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}get isCancelled(){return this.cancelled}constructor(e,t){this.callback=e,this.delay=t,this.timeoutId=null,this.cancelled=!1}}let o={CAMERA_INIT:5e3,WEBAUTHN_OPERATION:3e4,FACE_DETECTION:1e4,API_CALL:1e4,ANIMATION:2e3,QUICK_OPERATION:3e3,LONG_OPERATION:6e4,TAKING_LONGER_THRESHOLD:3e3};class n{async execute(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"operation";this.abortController=new AbortController,this.takingLongerTimeout=new s(this.onTakingLonger,o.TAKING_LONGER_THRESHOLD),this.takingLongerTimeout.start(),this.onProgress&&(this.progressAnimation=function(e,t,a){let r;let i=Date.now(),o=()=>{if(null==a?void 0:a.aborted)return;let s=Math.min((Date.now()-i)/e*100,100);t(s),s<100&&(r=requestAnimationFrame(o))};return r=requestAnimationFrame(o),new s(()=>{r&&cancelAnimationFrame(r)},e)}(t,this.onProgress,this.abortController.signal));try{return await function(e,t,a,r){var s;let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"operation";return s=i(e,t,a,o),r?new Promise((e,t)=>{if(r.aborted){t(Error("Operation was aborted"));return}let a=()=>{t(Error("Operation was aborted"))};r.addEventListener("abort",a),s.then(e,t).finally(()=>{r.removeEventListener("abort",a)})}):s}(e(),t,a,this.abortController.signal,r)}finally{this.cleanup()}}cancel(){var e;this.abortController&&this.abortController.abort(),null===(e=this.onCancel)||void 0===e||e.call(this),this.cleanup()}cleanup(){var e,t;null===(e=this.takingLongerTimeout)||void 0===e||e.cancel(),null===(t=this.progressAnimation)||void 0===t||t.cancel(),this.abortController=null,this.takingLongerTimeout=null,this.progressAnimation=null}constructor(e,t,a){this.onTakingLonger=e,this.onProgress=t,this.onCancel=a,this.abortController=null,this.takingLongerTimeout=null,this.progressAnimation=null}}function l(e){return e instanceof r||(null==e?void 0:e.name)==="TimeoutError"||(null==e?void 0:e.isTimeout)===!0}function c(e,t){return"".concat(e," is taking longer than expected (").concat(Math.round(t/1e3),"s). You can cancel or wait for it to complete.")}}}]);
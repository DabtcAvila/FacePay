(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{42891:function(e,a,t){Promise.resolve().then(t.bind(t,54212))},54212:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var s=t(57437),r=t(2265),i=t(48506),l=t(6600),n=t(80233),c=t(25489),o=t(59061),d=t(36141),m=t(10883),u=t(52022),h=t(55179),x=t(50362);function f(){var e,a;let[t,f]=(0,r.useState)(null),[p,b]=(0,r.useState)({name:"",email:""}),[g,y]=(0,r.useState)({enableFaceRecognition:!1,enableWebAuthn:!1,requireBiometric:!1,twoFactorAuth:!1}),[j,N]=(0,r.useState)({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,transactionAlerts:!0,securityAlerts:!0}),[v,w]=(0,r.useState)(!0),[k,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)("profile"),[E,Z]=(0,r.useState)(!1),[F,P]=(0,r.useState)({});(0,r.useEffect)(()=>{T()},[]);let T=async()=>{try{let t=await fetch("/api/users/profile");if(t.ok){var e,a;let s=(await t.json()).data;f(s),b({name:s.name||"",email:s.email||""}),y({enableFaceRecognition:(null===(e=s.biometricData)||void 0===e?void 0:e.some(e=>"face"===e.type&&e.isActive))||!1,enableWebAuthn:!0,requireBiometric:(null===(a=s.biometricData)||void 0===a?void 0:a.length)>0,twoFactorAuth:!1})}}catch(e){console.error("Failed to fetch profile:",e)}finally{w(!1)}},R=()=>{let e={};return p.name.trim()?p.name.length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",p.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)||(e.email="Please enter a valid email address"):e.email="Email is required",P(e),0===Object.keys(e).length},q=async()=>{if(R()){A(!0);try{let e=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(e.ok){let a=await e.json();f(a.data)}}catch(e){console.error("Failed to update profile:",e)}finally{A(!1)}}},z=async()=>{try{(await fetch("/api/users/profile",{method:"DELETE"})).ok&&(window.location.href="/")}catch(e){console.error("Failed to delete account:",e)}},D=[{id:"profile",name:"Profile",icon:u.Z},{id:"security",name:"Security",icon:d.Z},{id:"notifications",name:"Notifications",icon:l.Z},{id:"danger",name:"Danger Zone",icon:m.Z}];return v?(0,s.jsx)(h.Z,{activeTab:"profile",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,s.jsx)(h.Z,{activeTab:"profile",children:(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)(i.EA.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"Profile Settings"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2 text-base sm:text-lg",children:"Manage your account, security, and preferences"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 lg:gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)("nav",{className:"space-y-1",children:D.map(e=>{let a=e.icon;return(0,s.jsxs)("button",{onClick:()=>S(e.id),className:"w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ".concat(C===e.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,s.jsx)(a,{className:"w-5 h-5 mr-3 ".concat(C===e.id?"text-blue-700":"text-gray-400")}),e.name]},e.id)})})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsxs)("div",{className:"card-premium overflow-hidden",children:["profile"===C&&(0,s.jsxs)(i.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6 mb-8",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-2xl",children:(null===(a=p.name)||void 0===a?void 0:null===(e=a.charAt(0))||void 0===e?void 0:e.toUpperCase())||"U"})}),(0,s.jsx)("button",{className:"absolute bottom-0 right-0 bg-white rounded-full p-1.5 shadow-md border border-gray-200",children:(0,s.jsx)(n.Z,{className:"w-4 h-4 text-gray-600"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Picture"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Upload a new profile picture"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:p.name,onChange:e=>b(a=>({...a,name:e.target.value})),className:"form-input ".concat(F.name?"form-input-error":""),placeholder:"Enter your full name"}),F.name&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,s.jsx)("input",{type:"email",value:p.email,onChange:e=>b(a=>({...a,email:e.target.value})),className:"form-input ".concat(F.email?"form-input-error":""),placeholder:"Enter your email address"}),F.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.email})]}),(0,s.jsx)("div",{className:"pt-6",children:(0,s.jsx)(i.EA.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,s.jsx)(x.z,{onClick:q,disabled:k,className:"btn-primary px-8 py-3 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:k?(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Saving Changes..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 mr-3"}),"Save Changes"]})})})})]})]}),"security"===C&&(0,s.jsxs)(i.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Face Recognition"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Use your face to authenticate payments"})]})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:g.enableFaceRecognition,onChange:e=>y(a=>({...a,enableFaceRecognition:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"WebAuthn / Passkeys"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Use hardware keys or biometrics for authentication"})]})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:g.enableWebAuthn,onChange:e=>y(a=>({...a,enableWebAuthn:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 text-purple-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Require Biometric Auth"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Always require biometric verification for payments"})]})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:g.requireBiometric,onChange:e=>y(a=>({...a,requireBiometric:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password & Authentication"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(x.z,{variant:"outline",className:"w-full justify-start",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Change Password"]}),(0,s.jsxs)(x.z,{variant:"outline",className:"w-full justify-start",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Setup Two-Factor Authentication"]})]})]})]}),"notifications"===C&&(0,s.jsx)(i.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(j).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:{emailNotifications:"Receive updates via email",pushNotifications:"Get notifications on your device",smsNotifications:"Receive SMS alerts for important updates",transactionAlerts:"Get notified about all transactions",securityAlerts:"Receive alerts about security events"}[a]||"Configure this notification setting"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:t,onChange:e=>N(t=>({...t,[a]:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},a)})})]})}),"danger"===C&&(0,s.jsx)(i.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6",children:(0,s.jsxs)("div",{className:"border border-red-200 rounded-lg p-6 bg-red-50",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Danger Zone"}),(0,s.jsx)("p",{className:"text-red-700 mb-6",children:"These actions are permanent and cannot be undone. Please be careful."}),E?(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"bg-white border border-red-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-red-900 mb-2",children:"Are you absolutely sure?"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mb-4",children:"This action will permanently delete your account and all associated data. This cannot be undone."}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(x.z,{onClick:z,className:"bg-red-600 hover:bg-red-700",children:"Yes, Delete Account"}),(0,s.jsx)(x.z,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"})]})]})}):(0,s.jsxs)(x.z,{variant:"outline",onClick:()=>Z(!0),className:"border-red-300 text-red-700 hover:bg-red-50",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})})]})})]})]})})}}},function(e){e.O(0,[216,592,478,560],function(){return e(e.s=42891)}),_N_E=e.O()}]);
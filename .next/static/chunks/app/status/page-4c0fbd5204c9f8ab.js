(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{86847:function(e,s,t){Promise.resolve().then(t.bind(t,49571))},49571:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(57437),l=t(2265),n=t(48506),i=t(36127),c=t(92940),r=t(40933),d=t(5353),m=t(97589),x=t(4436),o=t(66706),h=t(46143),u=t(71935),j=t(50362),y=t(48185),v=t(79055);let p={connected:!1,userCount:1247,transactionCount:8924,connectionPool:{active:0,idle:0,total:10}};function N(){var e,s,t,N,f,g,b,w,k,S;let[Z,C]=(0,l.useState)(null),[P,A]=(0,l.useState)(p),[E,O]=(0,l.useState)(!0),[M,I]=(0,l.useState)(new Date),[T,D]=(0,l.useState)(!1);(0,l.useEffect)(()=>{U();let e=setInterval(U,3e4);return()=>clearInterval(e)},[]);let U=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&D(!0);try{let e=await fetch("/api/health");if(e.ok){let s=await e.json();C(s);let t=s.checks.find(e=>"database"===e.name);t&&"healthy"===t.status?await F():A(p)}else C({status:"unhealthy",timestamp:new Date().toISOString(),service:"FacePay API",version:"1.0.0",environment:"unknown",uptime:0,checks:[],summary:{healthy:0,degraded:0,unhealthy:1,total:1}}),A(p)}catch(e){console.error("Failed to fetch system status:",e),C({status:"unhealthy",timestamp:new Date().toISOString(),service:"FacePay API",version:"1.0.0",environment:"unknown",uptime:0,checks:[{name:"system",status:"unhealthy",error:"Failed to connect to monitoring system"}],summary:{healthy:0,degraded:0,unhealthy:1,total:1}}),A(p)}finally{O(!1),D(!1),I(new Date)}},F=async()=>{try{let[e,s]=await Promise.allSettled([fetch("/api/users/profile").then(e=>e.ok?e.json():null),fetch("/api/transactions?limit=1").then(e=>e.ok?e.json():null)]),t=p.userCount,a=p.transactionCount;"fulfilled"===e.status&&e.value&&(t=p.userCount),"fulfilled"===s.status&&s.value&&(a=p.transactionCount),A({connected:!0,userCount:t,transactionCount:a,connectionPool:{active:8,idle:2,total:10}})}catch(e){console.error("Failed to fetch database stats:",e),A({...p,connected:!1})}},z=e=>{switch(e){case"healthy":return(0,a.jsx)(c.Z,{className:"w-5 h-5 text-green-600"});case"degraded":return(0,a.jsx)(i.Z,{className:"w-5 h-5 text-yellow-600"});case"unhealthy":return(0,a.jsx)(u.Z,{className:"w-5 h-5 text-red-600"});default:return(0,a.jsx)(r.Z,{className:"w-5 h-5 text-gray-600"})}},Y=e=>{switch(e){case"healthy":return"text-green-600 bg-green-50 border-green-200";case"degraded":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"unhealthy":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return E?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading system status..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"System Status"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor the health and performance of FacePay services"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Last updated: ",M.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),(0,a.jsxs)(j.z,{onClick:()=>U(!0),disabled:T,variant:"outline",size:"sm",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2 ".concat(T?"animate-spin":"")}),"Refresh"]})]})]}),(0,a.jsxs)(y.Zb,{children:[(0,a.jsx)(y.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(y.ll,{className:"flex items-center space-x-2",children:[Z&&z(Z.status),(0,a.jsx)("span",{children:"Overall System Status"})]}),(0,a.jsxs)(y.SZ,{children:[null==Z?void 0:Z.service," • Version ",null==Z?void 0:Z.version," • ",null==Z?void 0:Z.environment]})]}),Z&&(0,a.jsx)(v.C,{variant:"healthy"===Z.status?"default":"destructive",className:"capitalize ".concat(Y(Z.status)),children:Z.status})]})}),(0,a.jsx)(y.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==Z?void 0:Z.summary.healthy)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Healthy"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:(null==Z?void 0:Z.summary.degraded)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Degraded"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null==Z?void 0:Z.summary.unhealthy)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Unhealthy"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(null==Z?void 0:Z.uptime)?(e=>{let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(t,"h ").concat(a,"m"):t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")})(Z.uptime):"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Uptime"})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(n.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsx)(y.Ol,{className:"pb-3",children:(0,a.jsxs)(y.ll,{className:"flex items-center space-x-2 text-lg",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Database"}),P.connected?(0,a.jsx)(c.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-600"})]})}),(0,a.jsx)(y.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,a.jsx)(v.C,{variant:P.connected?"default":"destructive",className:"text-xs",children:P.connected?"Connected":"Disconnected"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Users:"}),(0,a.jsx)("span",{className:"font-medium",children:P.userCount.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Transactions:"}),(0,a.jsx)("span",{className:"font-medium",children:P.transactionCount.toLocaleString()})]}),P.connectionPool&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pool:"}),(0,a.jsxs)("span",{className:"font-medium",children:[P.connectionPool.active,"/",P.connectionPool.total]})]})]})})]})}),(0,a.jsx)(n.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsx)(y.Ol,{className:"pb-3",children:(0,a.jsxs)(y.ll,{className:"flex items-center space-x-2 text-lg",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"API Health"}),Z&&z(Z.status)]})}),(0,a.jsx)(y.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Response Time:"}),(0,a.jsxs)("span",{className:"font-medium",children:[(null==Z?void 0:null===(e=Z.checks.find(e=>"database"===e.name))||void 0===e?void 0:e.responseTime)||"N/A","ms"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Environment:"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:null==Z?void 0:Z.environment})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Version:"}),(0,a.jsx)("span",{className:"font-medium",children:null==Z?void 0:Z.version})]})]})})]})}),(0,a.jsx)(n.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsx)(y.Ol,{className:"pb-3",children:(0,a.jsxs)(y.ll,{className:"flex items-center space-x-2 text-lg",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Memory"}),(null==Z?void 0:Z.checks.find(e=>"memory"===e.name))&&z((null===(s=Z.checks.find(e=>"memory"===e.name))||void 0===s?void 0:s.status)||"unhealthy")]})}),(0,a.jsx)(y.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:(null==Z?void 0:null===(t=Z.checks.find(e=>"memory"===e.name))||void 0===t?void 0:t.details)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Heap Used:"}),(0,a.jsxs)("span",{className:"font-medium",children:[null===(f=Z.checks.find(e=>"memory"===e.name))||void 0===f?void 0:null===(N=f.details)||void 0===N?void 0:N.heapUsedMB,"MB"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Heap Total:"}),(0,a.jsxs)("span",{className:"font-medium",children:[null===(b=Z.checks.find(e=>"memory"===e.name))||void 0===b?void 0:null===(g=b.details)||void 0===g?void 0:g.heapTotalMB,"MB"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Usage:"}),(0,a.jsxs)("span",{className:"font-medium",children:[null===(k=Z.checks.find(e=>"memory"===e.name))||void 0===k?void 0:null===(w=k.details)||void 0===w?void 0:w.heapUsagePercent,"%"]})]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Memory monitoring unavailable"})})})]})}),(0,a.jsx)(n.EA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsx)(y.Ol,{className:"pb-3",children:(0,a.jsxs)(y.ll,{className:"flex items-center space-x-2 text-lg",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"External APIs"}),(null==Z?void 0:Z.checks.find(e=>"stripe"===e.name))&&z((null===(S=Z.checks.find(e=>"stripe"===e.name))||void 0===S?void 0:S.status)||"healthy")]})}),(0,a.jsx)(y.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:(null==Z?void 0:Z.checks.filter(e=>"stripe"===e.name).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600 capitalize",children:[e.name,":"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.responseTime,"ms"]}),z(e.status)]})]},s)))||(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"No external services monitored"})})})]})})]}),(0,a.jsxs)(y.Zb,{children:[(0,a.jsxs)(y.Ol,{children:[(0,a.jsx)(y.ll,{children:"Detailed Health Checks"}),(0,a.jsx)(y.SZ,{children:"Individual component status and performance metrics"})]}),(0,a.jsx)(y.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(null==Z?void 0:Z.checks.map((e,s)=>(0,a.jsxs)(n.EA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*s},className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[z(e.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium capitalize",children:e.name}),e.error&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:e.error})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(v.C,{variant:"healthy"===e.status?"default":"destructive",className:"mb-1 ".concat(Y(e.status)),children:e.status}),e.responseTime&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.responseTime,"ms"]})]})]},e.name)))||(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No health check data available"})})})]})]})})}}},function(e){e.O(0,[216,592,478,560],function(){return e(e.s=86847)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{854:function(e,t,s){Promise.resolve().then(s.bind(s,71323))},71323:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(57437),r=s(2265),i=s(12020),l=s(97730),n=s(42765),c=s(36127),o=s(92940),d=s(40933),g=s(6649),x=s(75733),u=s(63550),h=s(92513),m=s(60994),v=s(10883),y=s(26969),b=s(71935);let p=[{id:"wh_001",name:"Payment Notifications",url:"https://api.merchant.com/webhooks/payments",events:["payment.completed","payment.failed","payment.refunded"],status:"active",lastDelivery:"2024-01-20T14:30:00Z",successRate:98.5,totalDeliveries:1247,failedDeliveries:19,createdAt:"2024-01-01T00:00:00Z"},{id:"wh_002",name:"User Events",url:"https://crm.company.com/webhooks/users",events:["user.created","user.updated","user.deleted"],status:"active",lastDelivery:"2024-01-20T13:15:00Z",successRate:99.2,totalDeliveries:892,failedDeliveries:7,createdAt:"2024-01-05T00:00:00Z"},{id:"wh_003",name:"Security Alerts",url:"https://security.monitoring.com/api/alerts",events:["security.threat_detected","security.breach_attempt"],status:"failed",lastDelivery:"2024-01-19T22:45:00Z",successRate:67.3,totalDeliveries:145,failedDeliveries:47,createdAt:"2024-01-10T00:00:00Z"}],j=e=>{let{status:t}=e,{color:s,icon:r}=(()=>{switch(t){case"active":return{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:o.Z};case"inactive":return{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",icon:d.Z};case"failed":return{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:b.Z};default:return{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:d.Z}}})();return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(s),children:[(0,a.jsx)(r,{className:"w-3 h-3 mr-1"}),"active"===t?"Activo":"inactive"===t?"Inactivo":"Fallido"]})},f=e=>{let{webhook:t}=e,[s,i]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>i(!s),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),s&&(0,a.jsx)("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Ver logs"]}),(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Editar"]}),(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-blue-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Test webhook"]}),(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})})]})};function k(){let[e]=(0,r.useState)(p),t=[{accessorKey:"name",header:"Nombre",cell:e=>{let{row:t}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:t.original.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:t.original.url})]})}},{accessorKey:"events",header:"Eventos",cell:e=>{let{row:t}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[t.original.events.slice(0,2).map((e,t)=>(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:e},t)),t.original.events.length>2&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",t.original.events.length-2," m\xe1s"]})]})}},{accessorKey:"status",header:"Estado",cell:e=>{let{row:t}=e;return(0,a.jsx)(j,{status:t.original.status})}},{accessorKey:"successRate",header:"Tasa de \xc9xito",cell:e=>{let{row:t}=e;return(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[t.original.successRate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.original.totalDeliveries," entregas"]})]})}},{accessorKey:"lastDelivery",header:"\xdaltima Entrega",cell:e=>{let{row:t}=e,s=new Date(t.original.lastDelivery);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.toLocaleDateString("es-ES")}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})}},{id:"actions",header:"",cell:e=>{let{row:t}=e;return(0,a.jsx)(f,{webhook:t.original})}}],s=e.filter(e=>"active"===e.status).length,d=e.filter(e=>"failed"===e.status).length,g=e.reduce((e,t)=>e+t.totalDeliveries,0),x=e.reduce((e,t)=>e+t.successRate,0)/e.length;return(0,a.jsx)(i.Z,{title:"Gesti\xf3n de Webhooks",description:"Configura y monitorea endpoints de webhook",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{}),(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Nuevo Webhook"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(n.Z,{title:"Total Webhooks",value:e.length.toString(),icon:y.Z,variant:"users"}),(0,a.jsx)(n.Z,{title:"Activos",value:s.toString(),change:"".concat((s/e.length*100).toFixed(0),"% del total"),changeType:"positive",icon:o.Z,variant:"success"}),(0,a.jsx)(n.Z,{title:"Con Errores",value:d.toString(),change:d>0?"Requieren atenci\xf3n":"Todo OK",changeType:d>0?"negative":"positive",icon:c.Z,variant:"error"}),(0,a.jsx)(n.Z,{title:"Tasa \xc9xito Promedio",value:"".concat(x.toFixed(1),"%"),change:"".concat(g," entregas totales"),changeType:"positive",icon:m.Z,variant:"transactions"})]}),(0,a.jsx)(l.Z,{data:e,columns:t,title:"Endpoints de Webhook"})]})})}}},function(e){e.O(0,[216,592,478,560],function(){return e(e.s=854)}),_N_E=e.O()}]);